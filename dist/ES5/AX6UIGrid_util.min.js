"use strict";function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}Object.defineProperty(exports,"__esModule",{value:!0});var _jqmin=require("jqmin"),_jqmin2=_interopRequireDefault(_jqmin),_AX6Util=require("./AX6Util"),_AX6Util2=_interopRequireDefault(_AX6Util),_AX6Info=require("./AX6Info"),_AX6Info2=_interopRequireDefault(_AX6Info),divideTableByFrozenColumnIndex=function(o,n){for(var e={rows:[]},l={rows:[]},r=0,s=o.rows.length;r<s;r++){var a=o.rows[r];e.rows[r]={cols:[]},l.rows[r]={cols:[]};for(var t=0,c=a.cols.length;t<c;t++){var u=_jqmin2.default.extend({},a.cols[t]),i=u.colIndex,d=u.colIndex+u.colspan;if(i<n)if(d<=n)e.rows[r].cols.push(u);else{var p=_jqmin2.default.extend({},u),h=_jqmin2.default.extend({},p);p.colspan=n-p.colIndex,h.colIndex=n,h.colspan=u.colspan-p.colspan,e.rows[r].cols.push(p),h.colspan&&l.rows[r].cols.push(h)}else l.rows[r].cols.push(u);u=null,i=null,d=null}a=null}return{leftData:e,rightData:l}},getTableByStartEndColumnIndex=function(o,n,e){for(var l={rows:[]},r=0,s=o.rows.length;r<s;r++){var a=o.rows[r];l.rows[r]={cols:[]};for(var t=0,c=a.cols.length;t<c;t++){var u=_jqmin2.default.extend({},a.cols[t]),i=u.colIndex,d=u.colIndex+u.colspan;(n<=i||d<=e)&&(n<=i&&d<=e?l.rows[r].cols.push(u):n>i&&d>n?(u.colspan=d-n,l.rows[r].cols.push(u)):d>e&&i<=e&&l.rows[r].cols.push(u))}}return l},getMousePosition=function(o){var n=void 0,e=o.originalEvent?o.originalEvent:o;return n="changedTouches"in e&&e.changedTouches?e.changedTouches[0]:e,{clientX:n.pageX,clientY:n.pageY}},ENM={mousedown:_AX6Info2.default.supportTouch?"touchstart":"mousedown",mousemove:_AX6Info2.default.supportTouch?"touchmove":"mousemove",mouseup:_AX6Info2.default.supportTouch?"touchend":"mouseup"},makeHeaderTable=function(o){var n=_AX6Util2.default.deepCopy(o),e=this.config,l={rows:[]},r=0;!function o(n,s,a){for(var t={cols:[]},c=0,u=n.length;c<u;c++){var i=n[c],d=1;i.hidden||(i.colspan=1,i.rowspan=1,i.rowIndex=s,i.colIndex=a?(r=a.colIndex+c+1,a.colIndex+c):r++,t.cols.push(i),"columns"in i?d=o(i.columns,s+1,i):i.width="width"in i?i.width:e.columnMinWidth,i.colspan=d)}return t.cols.length>0?(l.rows[s]||(l.rows[s]={cols:[]}),l.rows[s].cols=l.rows[s].cols.concat(t.cols),t.cols.length-1+d):d}(n,0);for(var s=0,a=l.rows.length;s<a;s++)for(var t=0,c=l.rows[s].cols.length;t<c;t++)"columns"in l.rows[s].cols[t]||(l.rows[s].cols[t].rowspan=a-s);return l},makeBodyRowTable=function(o){var n={rows:[]},e=0;return function o(l,r,s){for(var a={cols:[]},t=0,c=l.length,u=1;t<c;t++){var i=l[t];u=1,i.hidden||("key"in i?(i.colspan=1,i.rowspan=1,i.rowIndex=r,i.colIndex=s?(e=s.colIndex+t+1,s.colIndex+t):e++,a.cols.push(i),"columns"in i&&(u=o(i.columns,r+1,i)),i.colspan=u):"columns"in i&&function n(l){for(var t=0,c=l.length;t<c;t++){var u=l[t],i=1;u.hidden||("key"in u?(u.colspan=1,u.rowspan=1,u.rowIndex=r,u.colIndex=s?(e=s.colIndex+t+1,s.colIndex+t):e++,a.cols.push(u),"columns"in u&&(i=o(u.columns,r+1,u)),u.colspan=i):"columns"in u&&n(u.columns,r))}}(i.columns)),i=null}return a.cols.length>0?(n.rows[r]||(n.rows[r]={cols:[]}),n.rows[r].cols=n.rows[r].cols.concat(a.cols),a.cols.length-1+u):u}(_AX6Util2.default.deepCopy(o),0),function(o){for(var n=0,e=o.rows.length;n<e;n++){for(var l=o.rows[n],r=0,s=l.cols.length;r<s;r++){var a=l.cols[r];"columns"in a||(a.rowspan=e-n),a=null}l=null}}(n),n},makeBodyRowMap=function(o){var n={};return o.rows.forEach(function(o){o.cols.forEach(function(o){n[o.rowIndex+"_"+o.colIndex]=_jqmin2.default.extend({},o)})}),n},makeFootSumTable=function(o){for(var n={rows:[]},e=0,l=o.length;e<l;e++){var r=o[e],s=0;n.rows[e]={cols:[]};for(var a=0,t=r.length;a<t&&!(s>this.colGroup.length);a++){var c=r[a].colspan||1;r[a].label||r[a].key?n.rows[e].cols.push({colspan:c,rowspan:1,colIndex:s,columnAttr:"sum",align:r[a].align,label:r[a].label,key:r[a].key,collector:r[a].collector,formatter:r[a].formatter}):n.rows[e].cols.push({colIndex:s,colspan:c,rowspan:1,label:"&nbsp;"}),s+=c,c=null}if(s<this.colGroup.length)for(var u=s;u<this.colGroup.length;u++)n.rows[e].cols.push({colIndex:u,colspan:1,rowspan:1,label:"&nbsp;"});r=null,s=null}return n},makeBodyGroupingTable=function(o){var n={rows:[]},e=0;n.rows[0]={cols:[]};for(var l=0,r=o.length;l<r&&!(e>this.columns.length);l++){var s=o[l].colspan||1;o[l].label||o[l].key?n.rows[0].cols.push({colspan:s,rowspan:1,rowIndex:0,colIndex:e,columnAttr:"default",align:o[l].align,label:o[l].label,key:o[l].key,collector:o[l].collector,formatter:o[l].formatter}):n.rows[0].cols.push({rowIndex:0,colIndex:e,colspan:s,rowspan:1,label:"&nbsp;"}),e+=s}if(e<this.colGroup.length)for(var a=e;a<this.colGroup.length;a++)n.rows[0].cols.push({rowIndex:0,colIndex:a,colspan:1,rowspan:1,label:"&nbsp;"});return n},findPanelByColumnIndex=function(o,n,e){var l=void 0,r=!1,s=[];return this.xvar.frozenRowIndex>o&&s.push("top"),this.xvar.frozenColumnIndex>n&&s.push("left"),s.push("body"),(this.xvar.frozenColumnIndex<=n||this.xvar.frozenRowIndex<=o)&&(l=s.join("-"),s.push("scroll"),r=!0),{panelName:s.join("-"),containerPanelName:l,isScrollPanel:r}},getRealPathForDataItem=function(o){var n=[],e=[].concat(o.split(/[\.\[\]]/g));return e.forEach(function(o){""!==o&&n.push('["'+o.replace(/['\"]/g,"")+'"]')}),e=null,n.join("")};exports.default={divideTableByFrozenColumnIndex:divideTableByFrozenColumnIndex,getTableByStartEndColumnIndex:getTableByStartEndColumnIndex,getMousePosition:getMousePosition,ENM:ENM,makeHeaderTable:makeHeaderTable,makeBodyRowTable:makeBodyRowTable,makeBodyRowMap:makeBodyRowMap,makeFootSumTable:makeFootSumTable,makeBodyGroupingTable:makeBodyGroupingTable,findPanelByColumnIndex:findPanelByColumnIndex,getRealPathForDataItem:getRealPathForDataItem};
//# sourceMappingURL=AX6UIGrid_util.js.map
