"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var _jqmin=require("jqmin"),_jqmin2=_interopRequireDefault(_jqmin),_AX6Util=require("../AX6Util"),_AX6Util2=_interopRequireDefault(_AX6Util),_AX6UIGrid_util=require("./AX6UIGrid_util"),_AX6UIGrid_util2=_interopRequireDefault(_AX6UIGrid_util),_AX6UIGrid_data=require("./AX6UIGrid_data"),_AX6UIGrid_data2=_interopRequireDefault(_AX6UIGrid_data),_AX6UIGrid_page=require("./AX6UIGrid_page"),_AX6UIGrid_page2=_interopRequireDefault(_AX6UIGrid_page),_AX6UIGrid_header=require("./AX6UIGrid_header"),_AX6UIGrid_header2=_interopRequireDefault(_AX6UIGrid_header),_AX6UIGrid_inline_editor=require("./AX6UIGrid_inline_editor"),_AX6UIGrid_inline_editor2=_interopRequireDefault(_AX6UIGrid_inline_editor),_AX6UIGrid_collector=require("./AX6UIGrid_collector"),_AX6UIGrid_collector2=_interopRequireDefault(_AX6UIGrid_collector),_AX6UIGrid_formatter=require("./AX6UIGrid_formatter"),_AX6UIGrid_formatter2=_interopRequireDefault(_AX6UIGrid_formatter),_AX6UIGrid_scroller=require("./AX6UIGrid_scroller"),_AX6UIGrid_scroller2=_interopRequireDefault(_AX6UIGrid_scroller),columnSelect={focusClear:function(){var t=this,i=void 0;for(var e in t.focusedColumn)(i=t.focusedColumn[e])&&t.$.panel[i.panelName].find('[data-ax6grid-tr-data-index="'+i.dindex+'"]').find('[data-ax6grid-column-rowindex="'+i.rowIndex+'"][data-ax6grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax6grid-column-focused");t.focusedColumn={}},clear:function(){var t=this,i=void 0;for(var e in t.selectedColumn)(i=t.selectedColumn[e])&&t.$.panel[i.panelName].find('[data-ax6grid-tr-data-index="'+i.dindex+'"]').find('[data-ax6grid-column-rowindex="'+i.rowIndex+'"][data-ax6grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax6grid-column-selected");t.selectedColumn={}},init:function(t){var i=this;if(this.isInlineEditing)for(var e in this.inlineEditing)if(e==t.dindex+"_"+t.colIndex+"_"+t.rowIndex)return this;columnSelect.focusClear.call(i),i.focusedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]={panelName:t.panelName,dindex:t.dindex,doindex:t.doindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan},columnSelect.clear.call(i),i.xvar.selectedRange={start:[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],end:null},i.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]=!i.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]&&{panelName:t.panelName,dindex:t.dindex,doindex:t.doindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan},this.$.panel[t.panelName].find('[data-ax6grid-tr-data-index="'+t.dindex+'"]').find('[data-ax6grid-column-rowindex="'+t.rowIndex+'"][data-ax6grid-column-colindex="'+t.colIndex+'"]').attr("data-ax6grid-column-focused","true").attr("data-ax6grid-column-selected","true"),this.isInlineEditing&&inlineEdit.deActive.call(this,"RETURN")},update:function(t){var i=this,e=void 0,o=void 0,n=void 0,l=void 0;i.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],columnSelect.clear.call(i);var d={r:{s:Math.min(i.xvar.selectedRange.start[0],i.xvar.selectedRange.end[0]),e:Math.max(i.xvar.selectedRange.start[0],i.xvar.selectedRange.end[0])},c:{s:Math.min(i.xvar.selectedRange.start[2],i.xvar.selectedRange.end[2]),e:Math.max(i.xvar.selectedRange.start[2]+i.xvar.selectedRange.start[3],i.xvar.selectedRange.end[2]+i.xvar.selectedRange.end[3])}};for(e=d.r.s;e<=d.r.e;e++)for(l=this.bodyRowTable.rows.length,n=0;n<l;n++)for(o=d.c.s;o<=d.c.e;o++){var a=[],r="";i.xvar.frozenRowIndex>e&&a.push("top"),i.xvar.frozenColumnIndex>o&&a.push("left"),a.push("body"),"top"!==a[0]&&a.push("scroll"),r=a.join("-"),i.selectedColumn[e+"_"+o+"_"+n]={panelName:r,dindex:e,rowIndex:n,colIndex:o,colspan:t.colspan},a=null,r=null}e=null,o=null,n=null;for(var s in i.selectedColumn){var u=i.selectedColumn[s];u&&i.$.panel[u.panelName].find('[data-ax6grid-tr-data-index="'+u.dindex+'"]').find('[data-ax6grid-column-rowindex="'+u.rowIndex+'"][data-ax6grid-column-colindex="'+u.colIndex+'"]').attr("data-ax6grid-column-selected","true")}}},columnSelector={on:function(t){var i=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(columnSelect.init.call(i,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax6grid-column-attr="default"]',function(t){this.getAttribute("data-ax6grid-column-rowIndex")&&(columnSelect.update.call(i,{panelName:this.getAttribute("data-ax6grid-panel-name"),dindex:Number(this.getAttribute("data-ax6grid-data-index")),doindex:Number(this.getAttribute("data-ax6grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax6grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax6grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),_AX6Util2.default.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){columnSelector.off.call(i)}).on("mouseleave.ax5grid-"+this.instanceId,function(){columnSelector.off.call(i)}),(0,_jqmin2.default)(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),(0,_jqmin2.default)(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},resetFrozenColumn=function(){var t=this.config,i=_AX6UIGrid_util2.default.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(i){for(var e={rows:[]},o=0,n=i.rows.length;o<n;o++)if(e.rows[o]={cols:[]},0===o){var l={label:"",colspan:1,rowspan:i.rows.length,colIndex:null},d={};t.showLineNumber&&(d=_jqmin2.default.extend({},l,{width:t.lineNumberColumnWidth,_width:t.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),e.rows[o].cols.push(d)),t.showRowSelector&&(d=_jqmin2.default.extend({},l,{width:t.rowSelectorColumnWidth,_width:t.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),e.rows[o].cols.push(d))}return e}.call(this,this.bodyRowTable),this.leftBodyRowData=i.leftData,this.bodyRowData=i.rightData,t.body.grouping){var e=_AX6UIGrid_util2.default.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(i){for(var e={rows:[]},o=0,n=i.rows.length;o<n;o++)if(e.rows[o]={cols:[]},0===o){var l={label:"",colspan:1,rowspan:i.rows.length,colIndex:null},d={};t.showLineNumber&&(d=_jqmin2.default.extend({},l,{width:t.lineNumberColumnWidth,_width:t.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),e.rows[o].cols.push(d)),t.showRowSelector&&(d=_jqmin2.default.extend({},l,{width:t.rowSelectorColumnWidth,_width:t.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),e.rows[o].cols.push(d))}return e}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=e.leftData,this.bodyGroupingData=e.rightData,this.bodyGroupingMap=_AX6UIGrid_util2.default.makeBodyRowMap.call(this,this.bodyGroupingTable)}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=_AX6UIGrid_util2.default.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},getFieldValue=function(t,i,e,o,n,l){var d=o.key,a={"<":"&lt;",">":"&gt;"};if("__d-index__"===d)return void 0!==i.__index?i.__index+1:"";if("__d-checkbox__"===d)return'<div class="checkBox" style="max-height: '+(o.width-10)+"px;min-height: "+(o.width-10)+'px;"></div>';if(o.editor&&function(t){return t.type in _AX6UIGrid_inline_editor2.default&&"inline"==_AX6UIGrid_inline_editor2.default[t.type].editMode}(o.editor))return n=n||_AX6UIGrid_data2.default.getValue.call(this,e,i.__origin_index__,d),_AX6Util2.default.isFunction(o.editor.disabled)&&o.editor.disabled.call({list:t,dindex:e,item:t[e],key:d,value:n})?n:l?n:_AX6UIGrid_inline_editor2.default[o.editor.type].getHtml(this,o.editor,n);var r={formatter:function(){var l={key:d,value:n||_AX6UIGrid_data2.default.getValue.call(this,e,i.__origin_index__,d),dindex:e,item:i,list:t},a=_AX6Util2.default.isFunction(o.formatter)?o.formatter:this.customFormatter[o.formatter]||_AX6UIGrid_formatter2.default[o.formatter];return a?a.call(l):l.value},default:function(){var t="";return void 0!==n?t=n:null!==(n=/[\.\[\]]/.test(d)?_AX6UIGrid_data2.default.getValue.call(this,e,i.__origin_index__,d):i[d])&&void 0!==n&&(t=n),"string"!=typeof t?t:t.replace(/[<>]/g,function(t){return a[t]||t})},treeControl:function(t){var o=this.config,n=this.config.tree.columnKeys,l="";return i[n.children].length?(l+='<a data-ax6grid-data-index="'+e+'" data-ax6grid-column-attr="tree-control" data-ax6grid-tnode-arrow="" style="width: '+o.tree.arrowWidth+"px;padding-left:"+i[n.depth]*o.tree.indentWidth+'px;">',l+=i[n.collapse]?o.tree.icons.collapsedArrow:o.tree.icons.openedArrow,l+="</a>"):l+='<span data-ax6grid-tnode-arrow="" style="width: '+o.tree.arrowWidth+"px;padding-left:"+i[n.depth]*o.tree.indentWidth+'px;">&nbsp;</span>',l+='<span data-ax6grid-tnode-item="'+(i[n.children].length?"group":"item")+'" style="width: '+o.tree.iconWidth+'px;">',l+=i[n.children].length?i[n.collapse]?o.tree.icons.collapsedGroupIcon:o.tree.icons.groupIcon:o.tree.icons.itemIcon,(l+="</span>")+t}},s=o.formatter?r.formatter.call(this):r.default.call(this);return this.config.tree.use&&o.treeControl&&(s=r.treeControl.call(this,s)),s},getGroupingValue=function(t,i,e){var o=void 0,n=void 0,l=void 0,d=e.key,a=e.label;return void 0===d?(n={key:d,list:t.__groupingList,groupBy:t.__groupingBy},o=_AX6Util2.default.isFunction(a)?a.call(n):a,t[e.colIndex]=o,o):"__d-index__"===d?"":"__d-checkbox__"===d?"":e.collector?(n={key:d,list:t.__groupingList},t[e.colIndex]=o=(_AX6Util2.default.isFunction(e.collector)?e.collector:this.customCollector[e.collector]||_AX6UIGrid_collector2.default[e.collector]).call(n),e.formatter?(n.value=o,(l=_AX6Util2.default.isFunction(e.formatter)?e.formatter:this.customFormatter[e.formatter]||_AX6UIGrid_formatter2.default[e.formatter])?l.call(n):o):o):"&nbsp;"},getSumFieldValue=function(t,i){var e=i.key,o=i.label;if(void 0===e)return o;if("__d-index__"===e||"__d-checkbox__"===e)return"&nbsp;";if(i.collector){var n={key:e,list:t},l=(_AX6Util2.default.isFunction(i.collector)?i.collector:this.customCollector[i.collector]||_AX6UIGrid_collector2.default[i.collector]).call(n);return n.value=l,i.formatter?(_AX6Util2.default.isFunction(i.formatter)?i.formatter:this.config.formatter[i.formatter]||_AX6UIGrid_formatter2.default[i.formatter]).call(n):l}return"&nbsp;"},inlineEdit={active:function(t,i,e){var o=this,n=void 0,l=void 0,d=void 0,a=void 0,r=void 0,s=void 0,u=void 0;for(var c in t){if(r=t[c].panelName,n=t[c].dindex,l=t[c].doindex,d=t[c].colIndex,a=t[c].rowIndex,t[c].colspan,s=this.colGroup[d],!(u=s.editor))return this;if(_AX6Util2.default.isFunction(u.disabled)&&u.disabled.call({list:this.list,dindex:n,item:this.list[n],key:s.key,value:e}))return this;if(!function(t,i){if(t.type in _AX6UIGrid_inline_editor2.default)return"popup"==_AX6UIGrid_inline_editor2.default[t.type].editMode}(u)){if("checkbox"==u.type){var h=void 0,x=void 0;x=u.config&&u.config.trueValue?(h=!(e==u.config.trueValue))?u.config.trueValue:u.config.falseValue:h=0==e||"false"==e||e<"1"?"true":"false",_AX6UIGrid_data2.default.setValue.call(o,n,l,s.key,x),updateRowState.call(o,["cellChecked"],n,l,{key:s.key,rowIndex:a,colIndex:d,editorConfig:s.editor.config,checked:h})}return this}if(this.list[n].__isGrouping)return!1;if(c in this.inlineEditing)return!1;this.inlineEditing[c]={editor:u,panelName:r,columnKey:c,column:t[c],useReturnToSave:_AX6UIGrid_inline_editor2.default[u.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var g=_AX6UIGrid_data2.default.getValue.call(o,n,l,s.key),f=function(t,i){return _AX6Util2.default.isNothing(t)&&(t=_AX6Util2.default.isNothing(g)?"":g),"money"==i.type?_AX6Util2.default.number(t,{money:!0}):t}.call(this,e,u);return this.inlineEditing[c].$inlineEditorCell=this.$.panel[r].find('[data-ax6grid-tr-data-index="'+n+'"]').find('[data-ax6grid-column-rowindex="'+a+'"][data-ax6grid-column-colindex="'+d+'"]').find("[data-ax6grid-cellholder]"),this.inlineEditing[c].$inlineEditor=_AX6UIGrid_inline_editor2.default[u.type].init(this,c,u,this.inlineEditing[c].$inlineEditorCell,f),!0}},deActive:function(t,i,e){if(!this.inlineEditing[i])return this;var o=this.inlineEditing[i].panelName,n=this.inlineEditing[i].column.dindex,l=this.inlineEditing[i].column.doindex,d=this.inlineEditing[i].column.rowIndex,a=this.inlineEditing[i].column.colIndex,r=this.bodyRowMap[this.inlineEditing[i].column.rowIndex+"_"+this.inlineEditing[i].column.colIndex],s=function(i){return void 0===e?"SELECT"==i.get(0).tagName||"INPUT"==i.get(0).tagName||"TEXTAREA"==i.get(0).tagName?i.val():(t="CANCEL",!1):e}(this.inlineEditing[i].$inlineEditor),u=function(t,i){return"money"==i.type?_AX6Util2.default.number(t):t}.call(this,s,r.editor),c={CANCEL:function(t,i,e){c.__clear.call(this)},RETURN:function(t,i,e,n){_AX6UIGrid_data2.default.setValue.call(this,t,i,e.key,n)?(c.__clear.call(this),repaintCell.call(this,o,t,i,d,a,n)):c.__clear.call(this)},__clear:function(){this.isInlineEditing=!1;var t=this.inlineEditing[i].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[i].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[i].$inlineEditor.ax5select("close"),this.inlineEditing[i].$inlineEditor.remove(),this.inlineEditing[i].$inlineEditor=null,this.inlineEditing[i].$inlineEditorCell=null,this.inlineEditing[i]=void 0,delete this.inlineEditing[i]}};t in c?c[t||"RETURN"].call(this,n,l,r,u):c.__clear.call(this)},keydown:function(t,i,e){var o={ESC:function(){for(var t in this.inlineEditing)inlineEdit.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing){if(!this.inlineEditing[i]||!this.inlineEditing[i].useReturnToSave)return!1;inlineEdit.deActive.call(this,"RETURN",i)}else for(var t in this.focusedColumn){var o=this.focusedColumn[t],n=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],l=o.dindex,d=o.doindex,a="",r=this.colGroup[o.colIndex];if(n&&(this.list[l].__isGrouping||(a=_AX6UIGrid_data2.default.getValue.call(this,l,d,n.key))),r.editor&&"inline"===_AX6UIGrid_inline_editor2.default[r.editor.type].editMode){if(e&&e.moveFocus);else if(n.editor&&"checkbox"==n.editor.type){a=_AX6UIGrid_data2.default.getValue.call(this,l,d,n.key);var s=void 0,u=void 0;n.editor.config&&n.editor.config.trueValue?a!=n.editor.config.trueValue?(u=n.editor.config.trueValue,s=!0):(u=n.editor.config.falseValue,s=!1):u=s=0==a||"false"==a||a<"1"?"true":"false",_AX6UIGrid_data2.default.setValue.call(this,l,d,n.key,u),updateRowState.call(this,["cellChecked"],l,d,{key:n.key,rowIndex:o.rowIndex,colIndex:o.colIndex,editorConfig:n.editor.config,checked:s})}}else inlineEdit.active.call(this,this.focusedColumn,null,a)}return!0}};t in o&&o[t].call(this,t,i,e)}},repaint=function(t){var i=this.config,e=this.proxyList?this.proxyList:this.list;t&&(resetFrozenColumn.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0);var o=void 0,n=void 0;if(this.config.virtualScrollY?(n=o=Math.floor(-this.$.panel["body-scroll"].position().top/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,this.xvar.paintRowCountTopMargin<o&&(o-=this.xvar.paintRowCountTopMargin)):o=this.xvar.frozenRowIndex,isNaN(o))return this;var l=0,d=0,a=null,r=null,s=-this.$.panel["body-scroll"].position().left;if(this.config.virtualScrollX){for(var u=this.xvar.frozenColumnIndex;u<this.colGroup.length;u++)this.colGroup[u]._sx=u==this.xvar.frozenColumnIndex?0:this.colGroup[u-1]._ex,this.colGroup[u]._ex=this.colGroup[u]._sx+this.colGroup[u]._width,this.colGroup[u]._sx<=s&&this.colGroup[u]._ex>=s&&(l=u),this.colGroup[u]._sx<=s+this.xvar.bodyWidth&&this.colGroup[u]._ex>=s+this.xvar.bodyWidth&&(d=u,null===a&&(a=this.colGroup[l]._sx),null===r&&(r=this.xvar.scrollContentWidth-this.colGroup[u]._ex));null===a&&(a=0),null===r&&(r=0),this.$.panel["top-body-scroll"].css({"padding-left":a,"padding-right":r}),this.$.panel["body-scroll"].css({"padding-left":a,"padding-right":r}),this.$.panel["bottom-body-scroll"].css({"padding-left":a,"padding-right":r})}var c=void 0===this.xvar.paintStartRowIndex,h=this.headerColGroup,x=this.asideBodyRowData,g=this.leftBodyRowData,f=this.bodyRowData,p=this.leftFootSumData,m=this.footSumData,v=this.asideBodyGroupingData,I=this.leftBodyGroupingData,_=this.bodyGroupingData,y=i.body.align,w=void 0,b=void 0;if(this.config.virtualScrollY?w=(b=Math.ceil(this.xvar.bodyHeight/this.xvar.bodyTrHeight))+(this.xvar.paintRowCountMargin||1):b=w=e.length,this.xvar.paintRowCountTopMargin<o&&Math.abs(this.xvar.paintStartRowIndex-o)<=this.xvar.paintRowCountTopMargin&&(o=this.xvar.paintStartRowIndex),this.xvar.dataRowCount===e.length&&this.xvar.paintStartRowIndex===o&&this.xvar.paintRowCount===w&&this.xvar.paintStartColumnIndex===l&&this.xvar.paintEndColumnIndex===d)return this;(a||r)&&(h=[].concat(h).splice(l-this.xvar.frozenColumnIndex,d-l+1+this.xvar.frozenColumnIndex),f=_AX6UIGrid_util2.default.getTableByStartEndColumnIndex(f,l,d),i.body.grouping&&(_=_AX6UIGrid_util2.default.getTableByStartEndColumnIndex(_,l,d)),i.footSum&&(m=_AX6UIGrid_util2.default.getTableByStartEndColumnIndex(m,l,d)),this.xvar.paintStartColumnIndex===l&&this.xvar.paintEndColumnIndex===d||(this.needToPaintSum=!0)),this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.list.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var C=function(t,e,o,n,l,d){var a=this.$.panel[t];if(!c&&!d)return this.$.livePanelKeys.push(t),!1;var r=[],s=void 0,u=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=void 0,m=void 0,v=void 0,I=void 0,_=void 0,w=void 0!==d&&void 0!==d.paintStartRowIndex||(d={paintStartRowIndex:0,paintRowCount:l.length},!1),b="#fff 0px, #fff "+(i.body.columnHeight-i.body.columnBorderWidth)+"px, #eee "+(i.body.columnHeight-i.body.columnBorderWidth)+"px, #eee "+i.body.columnHeight+"px";for(w&&r.push('<div style="background:repeating-linear-gradient(to top, '+b+");font-size:0;line-height:0;height: "+(d.paintStartRowIndex-this.xvar.frozenRowIndex)*d.bodyTrHeight+'px;"></div>'),r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,u=e.length;s<u;s++)r.push('<col style="width:'+e[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=d.paintStartRowIndex,x=function(){var t=void 0;return t=l.length,d.paintRowCount+d.paintStartRowIndex<t&&(t=d.paintRowCount+d.paintStartRowIndex),t}();h<x;h++)if(l[h]){var C=!1,R=void 0,A=void 0!==l[h].__origin_index__?l[h].__origin_index__:h;n&&"__isGrouping"in l[h]?(R=n,C=!0):R=o;for(g=0,f=R.rows.length;g<f;g++){for(r.push('<tr class="tr-'+h%4,i.body.trStyleClass?_AX6Util2.default.isFunction(i.body.trStyleClass)?" "+i.body.trStyleClass.call({item:l[h],index:h},l[h],h):" "+i.body.trStyleClass:"",'"',C?' data-ax6grid-grouping-tr="true"':"",' data-ax6grid-tr-data-index="'+h+'"',' data-ax6grid-tr-data-o-index="'+A+'"',' data-ax6grid-selected="'+(l[h][i.columnKeys.selected]||"false")+'"',' data-ax6grid-disable-selection="'+(l[h][i.columnKeys.disableSelection]||"false")+'"',">"),p=0,m=R.rows[g].cols.length;p<m;p++)v=R.rows[g].cols[p],I=i.body.columnHeight*v.rowspan-i.body.columnBorderWidth,_=v.align||y,r.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-data-index="'+h+'" ','data-ax6grid-data-o-index="'+A+'" ','data-ax6grid-column-row="'+g+'" ','data-ax6grid-column-col="'+p+'" ','data-ax6grid-column-rowIndex="'+v.rowIndex+'" ','data-ax6grid-column-colIndex="'+v.colIndex+'" ','data-ax6grid-column-attr="'+(v.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn[h+"_"+v.colIndex+"_"+v.rowIndex],this.selectedColumn[h+"_"+v.colIndex+"_"+v.rowIndex]),'colspan="'+v.colspan+'" ','rowspan="'+v.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?e+=t.styleClass.call({column:t,key:t.key,item:l[h],index:h})+" ":e+=t.styleClass+" "),i.body.columnBorderWidth&&(e+="hasBorder "),p==m-1&&(e+="isLastColumn "),e}.call(this,v)+'" ','style="height: '+I+'px;min-height: 1px;">'),r.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return v.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(v.multiLine?"multiLine":"")+'" '+(_?'data-ax6grid-text-align="'+_+'"':"")+'" style="height:'+t+"px;"+(v.multiLine?"":"line-height: "+e+"px;")+'">'}(I),C?getGroupingValue.call(this,l[h],h,v):getFieldValue.call(this,l,l[h],h,v),"</span>"),r.push("</td>");r.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-data-index="'+h+'" ','data-ax6grid-data-o-index="'+A+'" ','data-ax6grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}}return r.push("</table>"),w&&l.length&&r.push('<div style="background:repeating-linear-gradient(to bottom, '+b+");font-size:0;line-height:0;height: "+(l.length-h)*d.bodyTrHeight+'px;"></div>'),a.empty(),r=r.join(""),a.get(0).innerHTML=r,this.$.livePanelKeys.push(t),!0},R=function(t,e,o,n,l){var d=this.$.panel[t];if(!c&&!l)return this.$.livePanelKeys.push(t),!1;var a=[],r=void 0,s=void 0,u=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=void 0,m=void 0;for(a.push('<table border="0" cellpadding="0" cellspacing="0">'),a.push("<colgroup>"),r=0,s=e.length;r<s;r++)a.push('<col style="width:'+e[r]._width+'px;"  />');for(a.push("<col  />"),a.push("</colgroup>"),u=0,h=o.rows.length;u<h;u++){for(a.push('<tr class="tr-sum">'),x=0,g=o.rows[u].cols.length;x<g;x++)f=o.rows[u].cols[x],p=i.body.columnHeight*f.rowspan-i.body.columnBorderWidth,m=f.align||y,a.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-column-row="'+u+'" ','data-ax6grid-column-col="'+x+'" ','data-ax6grid-column-rowIndex="'+u+'" ','data-ax6grid-column-colIndex="'+f.colIndex+'" ','data-ax6grid-column-attr="'+(f.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn["sum_"+f.colIndex+"_"+u],this.selectedColumn["sum_"+f.colIndex+"_"+u]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?e+=t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":e+=t.styleClass+" "),i.body.columnBorderWidth&&(e+="hasBorder "),x==g-1&&(e+="isLastColumn "),e}.call(this,f)+'" ','style="height: '+p+'px;min-height: 1px;">'),a.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return f.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(m?'data-ax6grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;"+(f.multiLine?"":"line-height: "+e+"px;")+'">'}(p),getSumFieldValue.call(this,n,f),"</span>"),a.push("</td>");a.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-column-attr="sum" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),a.push("</tr>")}return a.push("</table>"),d.empty(),a=a.join(""),d.get(0).innerHTML=a,this.$.livePanelKeys.push(t),!0},A=function(t,e,o,n,l){for(var d=[],a={},r=void 0,s=this.$.panel[t].find("tr"),u=0,c=s.length;u<c;u++){var h=void 0,x=void 0;x=[];for(var g=0,f=(h=s[u].childNodes).length;g<f;g++){var p={$:(0,_jqmin2.default)(h[g])};"null"!=p.$.attr("data-ax6grid-column-col")&&(p.dindex=p.$.attr("data-ax6grid-data-index"),p.tri=p.$.attr("data-ax6grid-column-row"),p.ci=p.$.attr("data-ax6grid-column-col"),p.rowIndex=p.$.attr("data-ax6grid-column-rowIndex"),p.colIndex=p.$.attr("data-ax6grid-column-colIndex"),p.rowspan=p.$.attr("rowspan"),p.text=p.$.text(),x.push(p)),p=null}d.push(x)}if(d.length>1){r=!1;for(var m=0,v=d.length;m<v;m++)!function(t,o){for(var n=[],l=0,s=d[t].length;l<s;l++)!function(o,l){e[o].editor||_AX6Util2.default.isArray(i.body.mergeCells)&&!(_AX6Util2.default.search(i.body.mergeCells,e[o].key)>-1)||(a[o]&&function(){if(n.length>0){var i=!0;return n.forEach(function(e){d[t-1][e].text!=d[t][e].text&&(i=!1)}),i}return!0}()&&a[o].text==d[t][o].text?(d[t][o].rowspan=0,d[a[o].ri][o].rowspan++,r=!0):a[o]={ri:t,ci:o,text:d[t][o].text},n.push(o))}(l)}(m);if(r)for(var I=0,_=d.length;I<_;I++)for(var y=0,w=d[I].length;y<w;y++)0==d[I][y].rowspan?d[I][y].$.remove():d[I][y].rowspan>1&&d[I][y].$.attr("rowspan",d[I][y].rowspan).addClass("merged")}},G={paintStartRowIndex:o,paintRowCount:w,paintStartColumnIndex:l,paintEndColumnIndex:d,nopaintLeftColumnsWidth:a,nopaintRightColumnsWidth:r,bodyTrHeight:this.xvar.bodyTrHeight,virtualScrollX:this.config.virtualScrollX,virtualScrollY:this.config.virtualScrollY},S=_jqmin2.default.extend({},G,{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex});i.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&C.call(this,"top-aside-body",this.asideColGroup,x,v,e.slice(0,this.xvar.frozenRowIndex),S),C.call(this,"aside-body-scroll",this.asideColGroup,x,v,e,G),i.footSum&&R.call(this,"bottom-aside-body",this.asideColGroup,x,null,e)),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&C.call(this,"top-left-body",this.leftHeaderColGroup,g,I,e.slice(0,this.xvar.frozenRowIndex),S),C.call(this,"left-body-scroll",this.leftHeaderColGroup,g,I,e,G),i.footSum&&this.needToPaintSum&&R.call(this,"bottom-left-body",this.leftHeaderColGroup,p,e)),this.xvar.frozenRowIndex>0&&C.call(this,"top-body-scroll",h,f,_,e.slice(0,this.xvar.frozenRowIndex),S),C.call(this,"body-scroll",h,f,_,e,G),i.footSum&&this.needToPaintSum&&R.call(this,"bottom-body-scroll",h,m,e,G),i.rightSum,i.body.mergeCells&&this.list.length&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&A.call(this,"top-left-body",this.leftHeaderColGroup,g,e.slice(0,this.xvar.frozenRowIndex)),A.call(this,"left-body-scroll",this.leftHeaderColGroup,g,e,G)),this.xvar.frozenRowIndex>0&&A.call(this,"top-body-scroll",this.headerColGroup,f,e.slice(0,this.xvar.frozenRowIndex)),A.call(this,"body-scroll",this.headerColGroup,f,e,G)),this.xvar.virtualPaintStartRowIndex=n,this.xvar.paintStartRowIndex=o,this.xvar.paintRowCount=w,this.xvar.virtualPaintRowCount=b,this.xvar.paintStartColumnIndex=l,this.xvar.paintEndColumnIndex=d,this.xvar.nopaintLeftColumnsWidth=a,this.xvar.nopaintRightColumnsWidth=r,this.xvar.dataRowCount=e.length,this.needToPaintSum=!1,_AX6UIGrid_page2.default.statusUpdate.call(this)};exports.default={init:function(){var t=this;this.$.container.body.on("dblclick","[data-ax6grid-column-attr]",function(i){var e=void 0,o=void 0,n=void 0,l=void 0,d=void 0,a=void 0,r=void 0,s=void 0,u={default:function(e){if(t.isInlineEditing)for(var o in t.inlineEditing)if(o==e.dindex+"_"+e.colIndex+"_"+e.rowIndex)return this;var n=t.bodyRowMap[e.rowIndex+"_"+e.colIndex],l="";n&&(t.list[d].__isGrouping||(l=_AX6UIGrid_data2.default.getValue.call(t,d,a,n.key)));var r=t.colGroup[e.colIndex].editor;if(_AX6Util2.default.isObject(r))inlineEdit.active.call(t,t.focusedColumn,i,l);else if(t.config.body.onDBLClick){var s={self:t,page:t.page,list:t.list,item:t.list[e.dindex],dindex:e.dindex,doindex:e.doindex,rowIndex:e.rowIndex,colIndex:e.colIndex,column:n,value:t.list[e.dindex][n.key]};t.config.body.onDBLClick.call(s)}},rowSelector:function(t){},lineNumber:function(t){}};e=this.getAttribute("data-ax6grid-panel-name"),o=this.getAttribute("data-ax6grid-column-attr"),n=Number(this.getAttribute("data-ax6grid-column-row")),l=Number(this.getAttribute("data-ax6grid-column-col")),r=Number(this.getAttribute("data-ax6grid-column-rowIndex")),s=Number(this.getAttribute("data-ax6grid-column-colIndex")),d=Number(this.getAttribute("data-ax6grid-data-index")),a=Number(this.getAttribute("data-ax6grid-data-o-index")),o in u&&(u[o]({panelName:e,attr:o,row:n,col:l,dindex:d,doindex:a,rowIndex:r,colIndex:s}),_AX6Util2.default.stopEvent(i))}),this.$.container.body.on("click","[data-ax6grid-column-attr]",function(i){var e=void 0,o=void 0,n=void 0,l=void 0,d=void 0,a=void 0,r=void 0,s=void 0,u={default:function(i){var e=t.bodyRowMap[i.rowIndex+"_"+i.colIndex],o={self:t,page:t.page,list:t.list,item:t.list[i.doindex],dindex:i.dindex,doindex:i.doindex,rowIndex:i.rowIndex,colIndex:i.colIndex,column:e,value:t.list[i.dindex][e.key]};if(e.editor&&"checkbox"==e.editor.type){var n=_AX6UIGrid_data2.default.getValue.call(t,i.dindex,i.doindex,e.key),l=void 0,d=void 0;d=e.editor.config&&e.editor.config.trueValue?(l=!(n==e.editor.config.trueValue))?e.editor.config.trueValue:e.editor.config.falseValue:l=0==n||"false"==n||n<"1"?"true":"false",_AX6UIGrid_data2.default.setValue.call(t,i.dindex,i.doindex,e.key,d),updateRowState.call(t,["cellChecked"],i.dindex,i.doindex,{key:e.key,rowIndex:i.rowIndex,colIndex:i.colIndex,editorConfig:e.editor.config,checked:l})}else t.config.body.onClick&&t.config.body.onClick.call(o)},rowSelector:function(i){if(t.list[i.doindex][t.config.columnKeys.disableSelection])return!1;t.config.multipleSelect||t.selectedDataIndexs[0]===i.doindex||(updateRowState.call(t,["selectedClear"]),_AX6UIGrid_data2.default.clearSelect.call(t)),_AX6UIGrid_data2.default.select.call(t,i.dindex,i.doindex,void 0,{internalCall:!0}),updateRowState.call(t,["selected"],i.dindex,i.doindex)},lineNumber:function(t){},"tree-control":function(i,e){toggleCollapse.call(t,i.dindex,i.doindex)}};e=this.getAttribute("data-ax6grid-panel-name"),o=this.getAttribute("data-ax6grid-column-attr"),n=Number(this.getAttribute("data-ax6grid-column-row")),l=Number(this.getAttribute("data-ax6grid-column-col")),r=Number(this.getAttribute("data-ax6grid-column-rowIndex")),s=Number(this.getAttribute("data-ax6grid-column-colIndex")),d=Number(this.getAttribute("data-ax6grid-data-index")),a=Number(this.getAttribute("data-ax6grid-data-o-index")),o in u&&u[o]({panelName:e,attr:o,row:n,col:l,dindex:d,doindex:a,rowIndex:r,colIndex:s},this)}),this.$.container.body.on("contextmenu",function(i){var e=void 0,o=void 0,n=void 0,l=void 0,d=void 0,a=void 0,r=void 0,s={};(e=_AX6Util2.default.findParentNode(i.target,function(t){if(t.getAttribute("data-ax6grid-column-attr"))return!0}))&&(l=Number(e.getAttribute("data-ax6grid-column-rowIndex")),d=Number(e.getAttribute("data-ax6grid-column-colIndex")),o=Number(e.getAttribute("data-ax6grid-data-index")),n=Number(e.getAttribute("data-ax6grid-data-o-index")),r=t.bodyRowMap[l+"_"+d],a=t.list[o]),t.config.body.onContextMenu&&(s={element:e,dindex:o,doindex:n,rowIndex:l,colIndex:d,item:a,column:r,gridSelf:t},t.config.body.onContextMenu.call({self:t,item:a,column:r,dindex:o,doindex:n,rowIndex:l,colIndex:d},i,s)),_AX6Util2.default.stopEvent(i.originalEvent),e=null,o=null,n=null,l=null,d=null,a=null,r=null,s=null}),this.$.container.body.on("mousedown",'[data-ax6grid-column-attr="default"]',function(i){if(t.xvar.touchmoved)return!1;this.getAttribute("data-ax6grid-column-rowIndex")&&columnSelector.on.call(t,{panelName:this.getAttribute("data-ax6grid-panel-name"),dindex:Number(this.getAttribute("data-ax6grid-data-index")),doindex:Number(this.getAttribute("data-ax6grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax6grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax6grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("dragstart",function(t){return _AX6Util2.default.stopEvent(t),!1}),resetFrozenColumn.call(this),this.xvar.paintRowCountMargin=this.config.virtualScrollYCountMargin,this.xvar.paintRowCountTopMargin=this.config.virtualScrollYCountMargin-Math.floor(this.config.virtualScrollYCountMargin/2),this.config.virtualScrollAccelerated?this.__throttledScroll=_AX6Util2.default.throttle(function(t,i){this.config.virtualScrollY&&!i.noRepaint&&"top"in t?repaint.call(this):this.config.virtualScrollX&&!i.noRepaint&&"left"in t&&repaint.call(this),i.callback&&i.callback()},this.config.virtualScrollAcceleratedDelayTime):this.__throttledScroll=!1},repaint:repaint,repaintCell:function(t,i,e,o,n,l){var d=this,a=this.config,r=this.list,s=this.$.panel[t].find('[data-ax6grid-tr-data-index="'+i+'"]').find('[data-ax6grid-column-rowindex="'+o+'"][data-ax6grid-column-colindex="'+n+'"]').find("[data-ax6grid-cellholder]"),u=this.colGroup,c=u[n];s.html(getFieldValue.call(this,r,r[i],i,c)),c.editor&&c.editor.updateWith&&c.editor.updateWith.forEach(function(t){u.forEach(function(e){if(e.key==t){var o=e.rowIndex,n=e.colIndex,l=_AX6UIGrid_util2.default.findPanelByColumnIndex.call(d,i,n,o).panelName;d.$.panel[l].find('[data-ax6grid-tr-data-index="'+i+'"]').find('[data-ax6grid-column-rowindex="'+o+'"][data-ax6grid-column-colindex="'+n+'"]').find("[data-ax6grid-cellholder]").html(getFieldValue.call(d,r,r[i],i,e))}})});var h=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,x=this.headerColGroup,g=this.leftFootSumData,f=this.footSumData,p=this.leftBodyGroupingData,m=this.bodyGroupingData,v=a.body.align,I={paintStartRowIndex:h,paintRowCount:Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,bodyTrHeight:this.xvar.bodyTrHeight};(this.xvar.nopaintLeftColumnsWidth||this.xvar.nopaintRightColumnsWidth)&&(x=[].concat(x).splice(this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex-this.xvar.paintStartColumnIndex+1),a.body.grouping&&(m=_AX6UIGrid_util2.default.getTableByStartEndColumnIndex(m,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)),a.footSum&&(f=_AX6UIGrid_util2.default.getTableByStartEndColumnIndex(f,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)));var _=function(t,i,e,o,n){var l=this.$.panel[t],d=[],r=void 0,s=void 0,u=void 0,c=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=void 0;for(d.push('<table border="0" cellpadding="0" cellspacing="0">'),d.push("<colgroup>"),r=0,s=i.length;r<s;r++)d.push('<col style="width:'+i[r]._width+'px;"  />');for(d.push("<col  />"),d.push("</colgroup>"),u=0,c=e.rows.length;u<c;u++){for(d.push('<tr class="tr-sum">'),h=0,x=e.rows[u].cols.length;h<x;h++)g=e.rows[u].cols[h],f=a.body.columnHeight*g.rowspan-a.body.columnBorderWidth,p=g.align||v,d.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-column-row="'+u+'" ','data-ax6grid-column-col="'+h+'" ','data-ax6grid-column-rowIndex="'+u+'" ','data-ax6grid-column-colIndex="'+g.colIndex+'" ','data-ax6grid-column-attr="'+(g.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn["sum_"+g.colIndex+"_"+u],this.selectedColumn["sum_"+g.colIndex+"_"+u]),'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?i+=t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":i+=t.styleClass+" "),a.body.columnBorderWidth&&(i+="hasBorder "),h==x-1&&(i+="isLastColumn "),i}.call(this,g)+'" ','style="height: '+f+'px;min-height: 1px;">'),d.push(function(t){var i=a.body.columnHeight-2*a.body.columnPadding-a.body.columnBorderWidth;return g.multiLine||(t=a.body.columnHeight-a.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(g.multiLine?"multiLine":"")+'" '+(p?'data-ax6grid-text-align="'+p+'"':"")+'" style="height:'+t+"px;"+(g.multiLine?"":"line-height: "+i+"px;")+'">'}(f),getSumFieldValue.call(this,o,g),"</span>"),d.push("</td>");d.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-column-attr="sum" ','style="height: '+a.body.columnHeight+'px;min-height: 1px;" ',"></td>"),d.push("</tr>")}return d.push("</table>"),l.empty().get(0).innerHTML=d.join(""),!0},y=function(t,i,e,o,n){var l=this.$.panel[t],d=[],r=void 0,s=void 0,u=void 0,c=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=void 0;for(r=n.paintStartRowIndex,s=function(){var t=void 0;return t=o.length,n.paintRowCount+n.paintStartRowIndex<t&&(t=n.paintRowCount+n.paintStartRowIndex),t}();r<s;r++)if(o[r]&&e&&"__isGrouping"in o[r]){var m=e;for(d=[],u=0,c=m.rows.length;u<c;u++){for(h=0,x=m.rows[u].cols.length;h<x;h++)g=m.rows[u].cols[h],f=a.body.columnHeight*g.rowspan-a.body.columnBorderWidth,p=g.align||v,d.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-data-index="'+r+'" ','data-ax6grid-column-row="'+u+'" ','data-ax6grid-column-col="'+h+'" ','data-ax6grid-column-rowIndex="'+g.rowIndex+'" ','data-ax6grid-column-colIndex="'+g.colIndex+'" ','data-ax6grid-column-attr="'+(g.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn[r+"_"+g.colIndex+"_"+g.rowIndex],this.selectedColumn[r+"_"+g.colIndex+"_"+g.rowIndex]),'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?i+=t.styleClass.call({column:t,key:t.key,item:o[r],index:r})+" ":i+=t.styleClass+" "),a.body.columnBorderWidth&&(i+="hasBorder "),h==x-1&&(i+="isLastColumn "),i}.call(this,g)+'" ','style="height: '+f+'px;min-height: 1px;">'),d.push(function(t){var i=a.body.columnHeight-2*a.body.columnPadding-a.body.columnBorderWidth;return g.multiLine||(t=a.body.columnHeight-a.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(g.multiLine?"multiLine":"")+'" '+(p?'data-ax6grid-text-align="'+p+'"':"")+'" style="height:'+t+"px;"+(g.multiLine?"":"line-height: "+i+"px;")+'">'}(f),getGroupingValue.call(this,o[r],r,g),"</span>"),d.push("</td>");d.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-data-index="'+r+'" ','data-ax6grid-column-attr="default" ','style="height: '+a.body.columnHeight+'px;min-height: 1px;" ',"></td>")}l.find('tr[data-ax6grid-tr-data-index="'+r+'"]').empty().get(0).innerHTML=d.join("")}};a.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&y.call(this,"top-left-body",x,p,r.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),y.call(this,"left-body-scroll",x,p,r,I)),this.xvar.frozenRowIndex>0&&y.call(this,"top-body-scroll",x,m,r.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),y.call(this,"body-scroll",x,m,r,I)),this.xvar.frozenColumnIndex>0&&a.footSum&&this.needToPaintSum&&_.call(this,"bottom-left-body",x,g,r),a.footSum&&this.needToPaintSum&&_.call(this,"bottom-body-scroll",x,f,r,I)},repaintRow:function(t){var i=this.config,e=this.list,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,n=(this.asideBodyRowData,this.leftBodyRowData),l=this.bodyRowData,d=this.leftFootSumData,a=this.footSumData,r=(this.asideBodyGroupingData,this.leftBodyGroupingData),s=this.bodyGroupingData,u=i.body.align,c={paintStartRowIndex:o,paintRowCount:Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,bodyTrHeight:this.xvar.bodyTrHeight},h=function(t,e,o,n){var l=this.$.panel[t],d=[],a=void 0,r=void 0,s=void 0,c=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=void 0;for(d.push('<table border="0" cellpadding="0" cellspacing="0">'),d.push("<colgroup>"),a=0,r=e.length;a<r;a++)d.push('<col style="width:'+e[a]._width+'px;"  />');for(d.push("<col  />"),d.push("</colgroup>"),s=0,c=o.rows.length;s<c;s++){for(d.push('<tr class="tr-sum">'),h=0,x=o.rows[s].cols.length;h<x;h++)g=o.rows[s].cols[h],f=i.body.columnHeight*g.rowspan-i.body.columnBorderWidth,p=g.align||u,d.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-column-row="'+s+'" ','data-ax6grid-column-col="'+h+'" ','data-ax6grid-column-rowIndex="'+s+'" ','data-ax6grid-column-colIndex="'+g.colIndex+'" ','data-ax6grid-column-attr="'+(g.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn["sum_"+g.colIndex+"_"+s],this.selectedColumn["sum_"+g.colIndex+"_"+s]),'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?e+=t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":e+=t.styleClass+" "),i.body.columnBorderWidth&&(e+="hasBorder "),h==x-1&&(e+="isLastColumn "),e}.call(this,g)+'" ','style="height: '+f+'px;min-height: 1px;">'),d.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return g.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(g.multiLine?"multiLine":"")+'" '+(p?'data-ax6grid-text-align="'+p+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(f),getSumFieldValue.call(this,n,g),"</span>"),d.push("</td>");d.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-column-attr="sum" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),d.push("</tr>")}return d.push("</table>"),l.empty().get(0).innerHTML=d.join(""),!0},x=function(t,e,o,n,l){var d=this.$.panel[t],a=[],r=void 0,s=void 0,c=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=void 0,m=void 0;for(void 0!==l&&void 0!==l.paintStartRowIndex||(l={paintStartRowIndex:0,paintRowCount:n.length}),r=l.paintStartRowIndex,s=function(){var t=void 0;return t=n.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();r<s;r++)if(n[r]&&o&&"__isGrouping"in n[r]){var v=o;for(a=[],c=0,h=v.rows.length;c<h;c++){for(x=0,g=v.rows[c].cols.length;x<g;x++)f=v.rows[c].cols[x],p=i.body.columnHeight*f.rowspan-i.body.columnBorderWidth,m=f.align||u,a.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-data-index="'+r+'" ','data-ax6grid-column-row="'+c+'" ','data-ax6grid-column-col="'+x+'" ','data-ax6grid-column-rowIndex="'+f.rowIndex+'" ','data-ax6grid-column-colIndex="'+f.colIndex+'" ','data-ax6grid-column-attr="'+(f.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn[r+"_"+f.colIndex+"_"+f.rowIndex],this.selectedColumn[r+"_"+f.colIndex+"_"+f.rowIndex]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?e+=t.styleClass.call({column:t,key:t.key,item:n[r],index:r})+" ":e+=t.styleClass+" "),i.body.columnBorderWidth&&(e+="hasBorder "),x==g-1&&(e+="isLastColumn "),e}.call(this,f)+'" ','style="height: '+p+'px;min-height: 1px;">'),a.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return f.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(m?'data-ax6grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(p),getGroupingValue.call(this,n[r],r,f),"</span>"),a.push("</td>");a.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-data-index="'+r+'" ','data-ax6grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}d.find('tr[data-ax6grid-tr-data-index="'+r+'"]').empty().get(0).innerHTML=a.join("")}},g=function(t,e,o,n,l){var d=this.$.panel[t],a=[],r=void 0,s=void 0,c=void 0,h=void 0,x=void 0,g=void 0,f=void 0,p=o,m=void 0!==n[l].__origin_index__?n[l].__origin_index__:l;for(r=0,s=p.rows.length;r<s;r++){for(c=0,h=p.rows[r].cols.length;c<h;c++)x=p.rows[r].cols[c],g=i.body.columnHeight*x.rowspan-i.body.columnBorderWidth,f=x.align||u,a.push("<td ",'data-ax6grid-panel-name="'+t+'" ','data-ax6grid-data-index="'+l+'" ','data-ax6grid-data-o-index="'+m+'" ','data-ax6grid-column-row="'+r+'" ','data-ax6grid-column-col="'+c+'" ','data-ax6grid-column-rowIndex="'+x.rowIndex+'" ','data-ax6grid-column-colIndex="'+x.colIndex+'" ','data-ax6grid-column-attr="'+(x.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax6grid-column-focused="true" '),i&&(e+='data-ax6grid-column-selected="true" '),e}(this.focusedColumn[l+"_"+x.colIndex+"_"+x.rowIndex],this.selectedColumn[l+"_"+x.colIndex+"_"+x.rowIndex]),'colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(_AX6Util2.default.isFunction(t.styleClass)?e+=t.styleClass.call({column:t,key:t.key,item:n[l],index:l})+" ":e+=t.styleClass+" "),i.body.columnBorderWidth&&(e+="hasBorder "),c==h-1&&(e+="isLastColumn "),e}.call(this,x)+'" ','style="height: '+g+'px;min-height: 1px;">'),a.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return x.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax6grid-cellHolder="'+(x.multiLine?"multiLine":"")+'" '+(f?'data-ax6grid-text-align="'+f+'"':"")+'" style="height:'+t+"px;"+(x.multiLine?"":"line-height: "+e+"px;")+'">'}(g),getFieldValue.call(this,n,n[l],l,x),"</span>"),a.push("</td>");a.push("<td ",'data-ax6grid-column-row="null" ','data-ax6grid-column-col="null" ','data-ax6grid-data-index="'+l+'" ','data-ax6grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}d.find('tr[data-ax6grid-tr-data-index="'+l+'"]').empty().get(0).innerHTML=a.join("")};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?g.call(this,"top-left-body",this.leftHeaderColGroup,n,e.slice(0,this.xvar.frozenRowIndex),t):g.call(this,"left-body-scroll",this.leftHeaderColGroup,n,e,t)),this.xvar.frozenRowIndex>t?g.call(this,"top-body-scroll",this.headerColGroup,l,e.slice(0,this.xvar.frozenRowIndex),t):g.call(this,"body-scroll",this.headerColGroup,l,e,t),i.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?x.call(this,"top-left-body",this.leftHeaderColGroup,r,e.slice(0,this.xvar.frozenRowIndex)):x.call(this,"left-body-scroll",this.leftHeaderColGroup,r,e,c)),this.xvar.frozenRowIndex>t?x.call(this,"top-body-scroll",this.headerColGroup,s,e.slice(0,this.xvar.frozenRowIndex)):x.call(this,"body-scroll",this.headerColGroup,s,e,c)),this.xvar.frozenColumnIndex>0&&i.footSum&&this.needToPaintSum&&h.call(this,"bottom-left-body",this.leftHeaderColGroup,d,e),i.footSum&&this.needToPaintSum&&h.call(this,"bottom-body-scroll",this.headerColGroup,a,e,c)},updateRowState:function(t,i,e,o){var n=this,l=this.config,d={selected:function(t,i){if(this.list[i])for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax6grid-tr-data-index="'+t+'"]').attr("data-ax6grid-selected",this.list[i][l.columnKeys.selected])},selectedClear:function(){var t=this.list.length,i=void 0;if(this.proxyList){for(;t--;)this.list[t][l.columnKeys.selected]=!1;for(t=this.proxyList.length;t--;){if(this.list[e][l.columnKeys.selected])for(i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax6grid-tr-data-index="'+t+'"]').attr("data-ax6grid-selected",!1);this.proxyList[t][l.columnKeys.selected]=!1;var e=this.proxyList[t].__original_index__}}else for(;t--;){if(this.list[t][l.columnKeys.selected])for(i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax6grid-tr-data-index="'+t+'"]').attr("data-ax6grid-selected",!1);this.list[t][l.columnKeys.selected]=!1}},cellChecked:function(t,i,e){e.key;var o=e.rowIndex,n=e.colIndex,l=function(){var i=[];return this.xvar.frozenRowIndex>t&&i.push("top"),this.xvar.frozenColumnIndex>n&&i.push("left"),i.push("body"),"top"!==i[0]&&i.push("scroll"),i.join("-")}.call(this);this.$.panel[l].find('[data-ax6grid-tr-data-index="'+t+'"]').find('[data-ax6grid-column-rowIndex="'+o+'"][data-ax6grid-column-colIndex="'+n+'"]').find('[data-ax6grid-editor="checkbox"]').attr("data-ax6grid-checked",""+e.checked)}};void 0===e&&(e=i),t.forEach(function(t){if(!d[t])throw"invaild state name";d[t].call(n,i,e,o)})},updateRowStateAll:function(t,i){var e=this,o=(this.config,{selected:function(t){repaint.call(this,!0)}});t.forEach(function(t){if(!o[t])throw"invaild state name";o[t].call(e,i)})},scrollTo:function(t,i){if(void 0===i&&(i={timeoutUnUse:!1}),this.isInlineEditing)for(var e in this.inlineEditing)inlineEdit.deActive.call(this,"ESC",e);this.config.asidePanelWidth>0&&"top"in t&&this.$.panel["aside-body-scroll"].css({top:t.top}),this.xvar.frozenColumnIndex>0&&"top"in t&&this.$.panel["left-body-scroll"].css({top:t.top}),this.xvar.frozenRowIndex>0&&"left"in t&&this.$.panel["top-body-scroll"].css({left:t.left}),this.$.panel["body-scroll"].css(t),this.config.footSum&&"left"in t&&this.$.panel["bottom-body-scroll"].css({left:t.left}),this.__throttledScroll?this.__throttledScroll(t,i):(this.config.virtualScrollY&&!i.noRepaint&&"top"in t?repaint.call(this):this.config.virtualScrollX&&!i.noRepaint&&"left"in t&&repaint.call(this),i.callback&&i.callback())},blur:function(){columnSelect.focusClear.call(this),columnSelect.clear.call(this),this.isInlineEditing&&inlineEdit.deActive.call(this)},moveFocus:function(t){var i={UD:function(t){var i=!0,e=void 0,o=void 0,n=void 0,l=void 0;for(var d in this.focusedColumn){e=_jqmin2.default.extend({},this.focusedColumn[d],!0);break}if(!e)return!1;for(o=this.bodyRowMap[e.rowIndex+"_"+e.colIndex],columnSelect.focusClear.call(this),columnSelect.clear.call(this),t>0?e.rowIndex+(o.rowspan-1)+t>this.bodyRowTable.rows.length-1?(e.dindex=e.dindex+t,e.doindex=e.doindex+t,e.rowIndex=0,e.dindex>this.list.length-1&&(e.dindex=e.doindex=this.list.length-1,i=!1)):e.rowIndex=e.rowIndex+t:e.rowIndex+t<0?(e.dindex=e.dindex+t,e.doindex=e.doindex+t,e.rowIndex=this.bodyRowTable.rows.length-1,e.dindex<0&&(e.dindex=e.doindex=0,i=!1)):e.rowIndex=e.rowIndex+t,n=0;void 0===this.bodyRowMap[e.rowIndex+"_"+e.colIndex];){if(0==e.rowIndex||n%2==(t>0?0:1)?e.colIndex--:e.rowIndex--,e.rowIndex<=0&&e.colIndex<=0){i=!1;break}n++}if(l=_AX6UIGrid_util2.default.findPanelByColumnIndex.call(this,e.dindex,e.colIndex),this.config.body.mergeCells&&this.list.length){for(;!(this.$.panel[l.panelName].find('[data-ax6grid-tr-data-index="'+e.dindex+'"]').find('[data-ax6grid-column-rowindex="'+e.rowIndex+'"][data-ax6grid-column-colindex="'+e.colIndex+'"]').get(0)||(t>0?e.dindex++:e.dindex--,e.dindex<0||e.dindex>this.list.length-1)););l=_AX6UIGrid_util2.default.findPanelByColumnIndex.call(this,e.dindex,e.colIndex)}if(e.panelName=l.panelName,e.dindex+1>this.xvar.frozenRowIndex)if(e.dindex<=this.xvar.virtualPaintStartRowIndex){var a=(e.dindex-this.xvar.frozenRowIndex-1)*this.xvar.bodyTrHeight;a<0&&(a=0),scrollTo.call(this,{top:-a,timeoutUnUse:!1}),_AX6UIGrid_scroller2.default.resize.call(this)}else e.dindex+1>this.xvar.virtualPaintStartRowIndex+(this.xvar.virtualPaintRowCount-2)&&(scrollTo.call(this,{top:(this.xvar.virtualPaintRowCount-2-e.dindex)*this.xvar.bodyTrHeight,timeoutUnUse:!1}),_AX6UIGrid_scroller2.default.resize.call(this));return this.focusedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]=e,this.$.panel[e.panelName].find('[data-ax6grid-tr-data-index="'+e.dindex+'"]').find('[data-ax6grid-column-rowindex="'+e.rowIndex+'"][data-ax6grid-column-colindex="'+e.colIndex+'"]').attr("data-ax6grid-column-focused","true"),i},LR:function(t){var i=!0,e=void 0,o=!1,n="",l=void 0;for(var d in this.focusedColumn){e=_jqmin2.default.extend({},this.focusedColumn[d],!0);break}if(!e)return!1;if(this.bodyRowMap[e.rowIndex+"_"+e.colIndex],columnSelect.focusClear.call(this),columnSelect.clear.call(this),t<0?(e.colIndex=e.colIndex+t,e.colIndex<0&&(e.colIndex=0,i=!1)):(e.colIndex=e.colIndex+t,e.colIndex>this.colGroup.length-1&&(e.colIndex=this.colGroup.length-1,i=!1)),void 0===this.bodyRowMap[e.rowIndex+"_"+e.colIndex]&&(e.rowIndex=0),this.list[e.dindex]&&this.list[e.dindex].__isGrouping){if(t<0){for(;void 0===this.bodyGroupingMap[e.rowIndex+"_"+e.colIndex];)if(e.colIndex--,e.colIndex<=0){i=!1;break}}else for(;void 0===this.bodyGroupingMap[e.rowIndex+"_"+e.colIndex];)if(e.colIndex++,e.colIndex>=this.colGroup.length){i=!1;break}}else if(t<0){for(;void 0===this.bodyRowMap[e.rowIndex+"_"+e.colIndex];)if(e.colIndex--,e.colIndex<=0){i=!1;break}}else for(;void 0===this.bodyRowMap[e.rowIndex+"_"+e.colIndex];)if(e.colIndex++,e.colIndex>=this.colGroup.length){i=!1;break}if(l=_AX6UIGrid_util2.default.findPanelByColumnIndex.call(this,e.dindex,e.colIndex),this.config.body.mergeCells&&this.list.length&&e.dindex>1){for(;!(this.$.panel[l.panelName].find('[data-ax6grid-tr-data-index="'+e.dindex+'"]').find('[data-ax6grid-column-rowindex="'+e.rowIndex+'"][data-ax6grid-column-colindex="'+e.colIndex+'"]').get(0)||(e.dindex--,e.dindex<0||e.dindex>this.list.length-1)););l=_AX6UIGrid_util2.default.findPanelByColumnIndex.call(this,e.dindex,e.colIndex)}e.panelName=l.panelName;var a=function(){if(!this.config.virtualScrollX)return!1;var t=0;if(e.colIndex+1>this.xvar.frozenColumnIndex){if(e.colIndex<=this.xvar.paintStartColumnIndex&&this.colGroup[e.colIndex])return t=-this.colGroup[Number(e.colIndex)]._sx,scrollTo.call(this,{left:t}),_AX6UIGrid_header2.default.scrollTo.call(this,{left:t}),_AX6UIGrid_scroller2.default.resize.call(this),!0;if(e.colIndex>=this.xvar.paintEndColumnIndex&&this.colGroup[Number(e.colIndex)])return this.colGroup[Number(e.colIndex)]._ex>this.xvar.bodyWidth&&(t=this.colGroup[Number(e.colIndex)]._ex-this.xvar.bodyWidth,scrollTo.call(this,{left:-t}),_AX6UIGrid_header2.default.scrollTo.call(this,{left:-t}),_AX6UIGrid_scroller2.default.resize.call(this)),!0}return t=null,!1}.call(this);n=l.containerPanelName,o=l.isScrollPanel,this.focusedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]=e;var r=this.$.panel[e.panelName].find('[data-ax6grid-tr-data-index="'+e.dindex+'"]').find('[data-ax6grid-column-rowindex="'+e.rowIndex+'"][data-ax6grid-column-colindex="'+e.colIndex+'"]').attr("data-ax6grid-column-focused","true");if(!a&&r&&o){var s=function(){return r.position().left+r.outerWidth()>Math.abs(this.$.panel[e.panelName].position().left)+this.$.panel[n].width()?r.position().left+r.outerWidth()-this.$.panel[n].width():Math.abs(this.$.panel[e.panelName].position().left)>r.position().left?r.position().left:void 0}.call(this);void 0!==s&&(_AX6UIGrid_header2.default.scrollTo.call(this,{left:-s}),scrollTo.call(this,{left:-s}),_AX6UIGrid_scroller2.default.resize.call(this))}return i},INDEX:function(t){var i=void 0,e=void 0;for(var o in this.focusedColumn){i=_jqmin2.default.extend({},this.focusedColumn[o],!0);break}for(i||(i={rowIndex:0,colIndex:0}),this.bodyRowMap[i.rowIndex+"_"+i.colIndex],columnSelect.focusClear.call(this),columnSelect.clear.call(this),"end"==t&&(t=this.list.length-1),i.dindex=t,i.rowIndex=0,e=0;void 0===this.bodyRowMap[i.rowIndex+"_"+i.colIndex]&&(0==i.rowIndex||e%2==(_dy>0?0:1)?i.colIndex--:i.rowIndex--,!(i.rowIndex<=0&&i.colIndex<=0));)e++;var n=_AX6UIGrid_util2.default.findPanelByColumnIndex.call(this,i.dindex,i.colIndex);return i.panelName=n.panelName,function(){i.dindex+1>this.xvar.frozenRowIndex&&(i.dindex<this.xvar.virtualPaintStartRowIndex?(scrollTo.call(this,{top:-(i.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),_AX6UIGrid_scroller2.default.resize.call(this)):i.dindex+1>this.xvar.virtualPaintStartRowIndex+(this.xvar.virtualPaintRowCount-2)&&(scrollTo.call(this,{top:-(i.dindex-this.xvar.frozenRowIndex-this.xvar.virtualPaintRowCount+3)*this.xvar.bodyTrHeight}),_AX6UIGrid_scroller2.default.resize.call(this)))}.call(this),this.focusedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]=i,this.$.panel[i.panelName].find('[data-ax6grid-tr-data-index="'+i.dindex+'"]').find('[data-ax6grid-column-rowindex="'+i.rowIndex+'"][data-ax6grid-column-colindex="'+i.colIndex+'"]').attr("data-ax6grid-column-focused","true"),!0}},e={UP:function(){return i.UD.call(this,-1)},DOWN:function(){return i.UD.call(this,1)},LEFT:function(){return i.LR.call(this,-1)},RIGHT:function(){return i.LR.call(this,1)},HOME:function(){return i.INDEX.call(this,0)},END:function(){return i.INDEX.call(this,"end")},position:function(t){return i.INDEX.call(this,t)}};return t in e?e[t].call(this):e.position.call(this,t)},inlineEdit:inlineEdit,getExcelString:function(){var t=this.config,i=this.list,e=this.bodyRowTable,o=this.footSumTable,n=this.bodyGroupingTable,l=[];return l.push(function(t,i,e,o){var n=[],l=void 0,d=void 0,a=void 0,r=void 0,s=void 0,u=void 0,c=void 0;for(l=0,d=o.length;l<d;l++){var h=!1,x=void 0;e&&"__isGrouping"in o[l]?(x=e,h=!0):x=i;for(a=0,r=x.rows.length;a<r;a++){for(n.push("\n<tr>"),s=0,u=x.rows[a].cols.length;s<u;s++)c=x.rows[a].cols[s],n.push("<td ",'colspan="'+c.colspan+'" ','rowspan="'+c.rowspan+'" ',">",h?getGroupingValue.call(this,o[l],l,c):getFieldValue.call(this,o,o[l],l,c,void 0,"text"),"&nbsp;</td>");n.push("\n</tr>")}}return n.join("")}.call(this,this.headerColGroup,e,n,i)),t.footSum&&l.push(function(t,i,e){var o=[],n=void 0,l=void 0,d=void 0,a=void 0,r=void 0;for(n=0,l=i.rows.length;n<l;n++){for(o.push("\n<tr>"),d=0,a=i.rows[n].cols.length;d<a;d++)r=i.rows[n].cols[d],o.push("<td ",'colspan="'+r.colspan+'" ','rowspan="'+r.rowspan+'" ',">",getSumFieldValue.call(this,e,r),"</td>");o.push("\n</tr>")}return o.join("")}.call(this,this.headerColGroup,o,i)),t.rightSum,l.join("")},toggleCollapse:function(t,i,e){_AX6UIGrid_data2.default.toggleCollapse.call(this,t,i,e)&&(this.proxyList=_AX6UIGrid_data2.default.getProxyList.call(this,this.list),repaint.call(this))},click:function(t,i){var e={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};moveFocus.call(this,t),this.config.body.onClick&&this.config.body.onClick.call(e),e=null},dblClick:function(t,i){var e={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};moveFocus.call(this,t),this.config.body.onDBLClick&&this.config.body.onDBLClick.call(e),e=null}};
//# sourceMappingURL=AX6UIGrid_body.js.map
