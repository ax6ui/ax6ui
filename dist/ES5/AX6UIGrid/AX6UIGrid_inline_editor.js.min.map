{"version":3,"sources":["AX6UIGrid_inline_editor.js"],"names":["_jqmin","require","_AX6UIGrid_body","edit_text","useReturnToSave","editMode","getHtml","_root","_columnKey","_editor","_value","attributes","attributesText","k","init","_$parent","$el","_jqmin2","default","this","_AX6UIGrid_body2","inlineEdit","call","bindUI","_$el","focus","select","edit_money","append","on","data","ax5formatter","$","extend","pattern","config","edit_number","edit_date","ax5picker","direction","content","type","formatter","onStateChanged","state","self","activePicker","attr","deActive","po","push","join","edit_select","optionValue","optionText","eConfig","n","columnKeys","optionSelected","options","activeSelectOptionGroup","forEach","ax5select","edit_checkbox","checked","lineHeight","body","columnHeight","columnPadding","columnBorderWidth","trueValue","height","marginTop","edit_textarea","offset","box","width","$newDiv","find","css","editorHeight","buttonHeight","top","left","value","remove","ax5","util","stopEvent","e","originalEvent","$newTextarea","document","eventKeys","ESC","_getHtml","_bindUI","text","money","number","date","checkbox","textarea"],"mappings":"4IAAA,IAAAA,OAAAC,QAAA,gDACAC,gBAAAD,QAAA,6EAEME,WACFC,iBAAiB,EACjBC,SAAU,QALdC,QAAA,SAAAC,EAAAC,EAAAC,EAAAC,GAOQ,QAAiC,IAAvBD,EAAQE,WAA2B,CACzC,IAAIC,EAAkB,GACtB,IAAK,IAAIC,KAAKJ,EAAQE,WARlCC,GAAAA,IAAAC,EAAA,KAAAJ,EAAAE,WAAAE,GAAA,IAYQ,MAAA,wDAA+DH,EAA/D,KAA0EE,EAA1E,KAEJE,KAAM,SAAUP,EAAOC,EAAYC,EAASM,EAAUL,GAZpDP,IAAAA,EAMM,OALRC,EAAAA,OAAiBY,GADH,EAAAC,QAAAC,SAAAC,KAAAb,QAAAC,EAAAC,EAAAC,EAAAC,KAEdL,KAAAA,OAAUE,EAFIC,EAAAQ,EAAAP,EAAAM,EAAAL,GAGdJ,EAAAA,GAAS,OAAA,WACFc,iBAAAF,QAAAG,WAAeV,SAAfW,KAA8Bf,EAAA,SAAYC,KAEzCQ,GAECO,OAAA,SAAAhB,EAAAC,EAAAgB,EAAAf,EAAAM,EAAAL,GACJc,EAAAC,QAAAC,WAIDC,YACAZ,iBAASa,EACTvB,SAAKkB,QACLP,QAAIa,SAAWtB,EAAAC,EAAYC,EAAAC,GACvB,IAAAE,EAAA,GACH,QAFD,IAAAH,EAAAE,WAGA,IAAOK,IAAPH,KAAAJ,EAAAE,WAnBUC,GAAAA,IAAAC,EAAA,KAAAJ,EAAAE,WAAAE,GAAA,IAuBb,MAAA,yDAAAH,EAAA,KAAAE,EAAA,QAeDE,KAAM,SAAUP,EAAOC,EAAYC,EAASM,EAAUL,GAZpDiB,IAAAA,OAAAA,EAMM,OALRvB,EAAAA,OAAiBY,GADF,EAAAC,QAAAC,SAAAC,KAAAb,QAAAC,EAAAC,EAAAC,EAAAC,KAEfL,KAAAA,OAAUE,EAFKC,EAAAQ,EAAAP,EAAAM,EAAAL,GAGfJ,EAAAA,GAAS,OAAA,WACDM,iBAAAA,QAAAA,WAAAA,SAAJU,KAAAf,EAAA,SAAAC,KAEIQ,GAECO,OAAA,SAAAhB,EAAAC,EAAAgB,EAAAf,EAAAM,EAAAL,GACJc,EAAAM,KAAA,eAAA,eACDN,EAAAO,aAAOC,EAAAC,QAAA,GAVIC,QAAA,SAYTzB,EAAA0B,SACFX,EAAIR,QAAAA,WAIAoB,aACHhC,iBAFD,EAGAC,SAAA,QACHC,QApBc,SAAAC,EAAAC,EAAAC,EAAAC,GAqBfa,IAAQX,EAAUL,GACdiB,QAA0B,IAAhBf,EAAAE,WACVa,IAAKO,IAAAA,KAAaC,EAAArB,WACduB,GAAAA,IAASrB,EAATqB,KAASzB,EAAAE,WAAAE,GAATqB,IAGP,MAAA,0DAAAxB,EAAA,KAAAE,EAAA,QAeDE,KAAM,SAAUP,EAAOC,EAAYC,EAASM,EAAUL,GAZpD0B,IAAAA,EAMM,OALRhC,EAAAA,OAAiBY,GADD,EAAAC,QAAAC,SAAAC,KAAAb,QAAAC,EAAAC,EAAAC,EAAAC,KAEhBL,KAAAA,OAAUE,EAFMC,EAAAQ,EAAAP,EAAAM,EAAAL,GAGhBJ,EAAAA,GAAS,OAAA,WACDM,iBAAAA,QAAAA,WAAAA,SAAJU,KAAAf,EAAA,SAAAC,KAEIQ,GAECO,OAAA,SAAAhB,EAAAC,EAAAgB,EAAAf,EAAAM,EAAAL,GACJc,EAAAM,KAAA,eAAA,eACDN,EAAAO,aAAOC,EAAAC,QAAA,GAVKC,QAAA,UAYVzB,EAAA0B,SACFX,EAAIR,QAAJU,WAIIW,WACHjC,iBAFD,EAGAC,SAAA,QACHC,QApBe,SAAAC,EAAAC,EAAAC,EAAAC,GAqBhBa,MAAQ,4DAAsDb,EAAQ,OAElEc,KAAAA,SAAKO,EAAaC,EAAAvB,EAAeM,EAAAL,GAC7BwB,IAAAA,EAGP,OAJoCnB,EAE9BN,OAAQ0B,GAFX,EAAAlB,QAAAC,SAAAC,KAAAb,QAAAC,EAAAC,EAAAC,EAAAC,KAGAc,KAAKC,OAALlB,EAAAC,EAAAQ,EAAAP,EAAAM,EAAAL,GACHM,GAeDO,OAAQ,SAAUhB,EAAOC,EAAYgB,EAAMf,EAASM,EAAUL,GAZ5D2B,IAAAA,EAAY9B,EACdH,EAAAA,KAAAA,eADc,aAGdE,EAASgC,UAAAN,EAAAC,QAAU1B,GACfgC,UAAO,OAJGC,SAMRC,KAAA,OACFC,WACSd,QAAOZ,SARN2B,eAAA,WAYN,QAAAxB,KAAAyB,MACOrC,KAAXsC,KAAAC,aAAAC,KAAA,kCAAA,QAC0B,SAAhB5B,KAAVyB,OAcYxB,iBAAAF,QAAKG,WAAW2B,SAAS1B,KAAKuB,EAAM,SAAUrC,KAVtDgC,EAAAA,SAEIE,EAAAA,QAAAA,WAIJC,aACIvC,iBAAI,EACAC,SAAA,QACHC,QAAA,SAAMC,EAAIC,EAAcC,EAASC,GAC9B,IAAAuC,KAiBZ,OAhBSA,EAAAC,KAAA,oEACJD,EAAAC,KAAA,UAeED,EAAGE,KAAK,KAXlBrC,KAAA,SAAAP,EAAAC,EAAAC,EAAAM,EAAAL,GAlCL,IAAAM,EAsCIZ,OAWIW,EAASa,OAAOZ,GAAM,EAAAC,QAAAC,SAAOC,KAAKb,QAAQC,EAAOC,EAAYC,EAASC,KAZxE0C,KAAAA,OAAc7C,EAAAC,EAAAQ,EAAAP,EAAAM,EAAAL,GAChBN,GAEAE,OAAAA,SAASC,EAAAC,EAAiBA,EAAjBC,EAAAM,EAA8CL,GACnD,IAAIuC,GACDC,YACKG,YAAR,QAcQC,WAAY,OAZbL,eAAP,aAGAhC,QAAAC,QAAAe,QAAA,EAAAsB,EAAA9C,EAAA0B,QAEAoB,EAAKhC,QAAOhB,QAAOC,SAAnBgD,GACOxC,EAAPuC,EAAAE,WAAAJ,cAAA3C,IAAA8C,EAAAD,EAAAE,WAAAC,iBAAA,KAGA,IAAIH,EAAAA,EACAE,EAAAA,KAAAA,eAAY,aACRJ,EAAAA,UAAAA,EAAAA,QAAa,GACbC,UAAAA,OACAI,WAAAA,EAAgBD,WAHRE,QAAAJ,EAAAI,QADhBhB,eAAA,WAOc,QAAdxB,KAAOc,MAcKd,KAAK0B,KAAKe,wBAAwBb,KAAK,kCAAmC,UAZ9D,eAARc,KAAQjB,MACdW,iBAAAA,QAAAA,WAAAP,SAAmBK,KAArBR,EAAqCnC,SAAU6C,EAAQE,KAAWC,MAAAA,GAAAA,EAAkBD,WAAvCJ,cADrD,SAAAlC,KAAAyB,OAgBYxB,iBAAAF,QAAKG,WAAW2B,SAAS1B,KAAKuB,EAAM,MAAOrC,KAVvDgB,EAAKsC,SACDvB,EAAAA,UAAW,QACXkB,EAAAA,UAAAA,WAAoBA,GACpBE,EAAAA,KAAAA,KAASJ,UAIJQ,eACG1D,SAAA,SACHC,QAAA,SAAMC,EAAIE,EAAAC,GAEV,IACJsD,EADIC,EAAA1D,EAAA4B,OAAA+B,KAAAC,aAAA,EAAA5D,EAAA4B,OAAA+B,KAAAE,cAAA7D,EAAA4B,OAAA+B,KAAAG,kBAGT7C,EADGf,EAAQ0B,QAbX1B,EAAA0B,OAAAmC,UAce5D,GAAfD,EAAA0B,OAAAmC,UAAA,OAAA,QAEA,GAAe7C,GAAf,SAAAf,GAAAA,EAAA,IAAA,QAAA,OAgBA,IAAI6C,GAZNQ,UAAgB,EAClB1D,OAAU4D,EADQ,GAMd,OAUAhD,QAAAC,QAAOe,QAAO,EAAMsB,EAAS9C,EAAQ0B,QAZrCoB,EAAIU,WAAc1D,EAAAgD,EAAkBY,QAAe5D,EAE/CE,6DAA4CuD,EAAA,mBAAAT,EAAAgB,OAAA,YAAAhB,EAAAgB,OAAA,iBAAAhB,EAAAiB,UAAA,gBAI/CC,eAcLrE,iBAAiB,EAZbC,SAAIkD,QACAiB,SAAAA,SADUjE,EAAAC,EAAAC,EAAAC,GAAA,MAAA,8CAKd6C,QAAAA,SAAQiB,EAAaP,EAAaV,EAAAA,EAAdxC,EAApBL,GAEA,IAAAgE,EAAOlD,EAAAkD,SACVC,GApBLC,MAAApD,EAAAoD,SA2BQC,GAAA,EAAA5D,QAAAC,SAAA,mIACAR,EADA,sJAMIiE,EAAME,EAAAC,KAAA,YAAAD,EAAVE,KAGIC,SAAAA,WACAC,KAAAA,EAAAA,KAcAC,IAAKR,EAAOQ,IAZhBN,MAAAD,EAAAC,MACIC,OAjBU,MAwBdA,EAAAC,KAAA,aAGIK,EAAAA,QAAAA,SAAAA,SAAMT,MAFE9C,OAAAiD,GAGRK,EAAKR,QAHGhD,SAKR6C,EAAQS,GAAAA,OAAAA,SAAAA,GALZ5D,iBAAAF,QAAAG,WAAA2B,SAAA1B,KAAAf,EAAA,SAAAC,EAAAW,KAAAiE,OAOAP,EAAAQ,SASIC,IAAIC,KAAKC,UAAUC,EAAEC,iBANzBC,EAAA9D,GAAA,UAAO+D,SAAehE,GACtB+D,EAAAA,OAAAL,IAAqB5D,KAArBmE,UAAAC,MASQ1E,iBAAAF,QAAKG,WAAW2B,SAAS1B,KAAKf,EAAO,MAAOC,GAPpDmF,EAAgBN,SACZC,IAAAC,KAAAC,UAAAC,EAAKpE,mBAURP,KAND,SAAAP,EAAAC,EAAAC,EAAAM,EAAAL,GAeA,IAAAM,OAAAA,EAeA,OAdAD,EAAAa,OAAAZ,GAAA,EAAAC,QAAAC,SAAAC,KAAA4E,SAAAxF,EAAAC,EAAAC,EAAAC,KAWAS,KAAK6E,QAAQzF,EAAOC,EAAYQ,EAAKP,EAASM,EAAUL,GAGjDM,qBAHPiF,KAAA9F,UACA+F,MAAAvE,WASJwE,OAAU/D,YAPNgE,KAAA/D,UACHX,OAAA0B,YA1ELiD,SAAAtC,cAoFIuC,SAAY7B","file":"AX6UIGrid_inline_editor.js","sourcesContent":["import jQuery from \"jqmin\";\nimport BODY from \"./AX6UIGrid_body\";\n\nconst edit_text = {\n    useReturnToSave: true,\n    editMode: \"popup\",\n    getHtml: function (_root, _columnKey, _editor, _value) {\n        if(typeof _editor.attributes !== \"undefined\"){\n            var attributesText  = \"\";\n            for (var k in _editor.attributes){\n                attributesText += ` ${k}='${_editor.attributes[k]}'`;\n            }\n        }\n        return `<input type=\"text\" data-ax6grid-editor=\"text\" value=\"${_value}\" ${attributesText}>`;\n    },\n    init: function (_root, _columnKey, _editor, _$parent, _value) {\n        var $el;\n        _$parent.append($el = jQuery(this.getHtml(_root, _columnKey, _editor, _value)));\n        this.bindUI(_root, _columnKey, $el, _editor, _$parent, _value);\n        $el.on(\"blur\", function () {\n            BODY.inlineEdit.deActive.call(_root, \"RETURN\", _columnKey);\n        });\n        return $el;\n    },\n    bindUI: function (_root, _columnKey, _$el, _editor, _$parent, _value) {\n        _$el.focus().select();\n    }\n};\n\nconst edit_money = {\n    useReturnToSave: true,\n    editMode: \"popup\",\n    getHtml: function (_root, _columnKey, _editor, _value) {\n        let attributesText = \"\";\n        if(typeof _editor.attributes !== \"undefined\"){\n            for (let k in _editor.attributes){\n                attributesText += ` ${k}='${_editor.attributes[k]}'`;\n            }\n        }\n        return '<input type=\"text\" data-ax6grid-editor=\"money\" value=\"' + _value + '\" ' + attributesText + '\" />';\n    },\n    init: function (_root, _columnKey, _editor, _$parent, _value) {\n        let $el;\n        _$parent.append($el = jQuery(this.getHtml(_root, _columnKey, _editor, _value)));\n        this.bindUI(_root, _columnKey, $el, _editor, _$parent, _value);\n        $el.on(\"blur\", function () {\n            BODY.inlineEdit.deActive.call(_root, \"RETURN\", _columnKey);\n        });\n        return $el;\n    },\n    bindUI: function (_root, _columnKey, _$el, _editor, _$parent, _value) {\n        _$el.data(\"binded-ax5ui\", \"ax5formater\");\n        _$el.ax5formatter($.extend(true, {\n            pattern: \"money\"\n        }, _editor.config));\n        _$el.focus().select();\n    }\n};\n\nconst edit_number = {\n    useReturnToSave: true,\n    editMode: \"popup\",\n    getHtml: function (_root, _columnKey, _editor, _value) {\n        let attributesText = \"\";\n        if(typeof _editor.attributes !== \"undefined\"){\n            for (let k in _editor.attributes){\n                attributesText += ` ${k}='${_editor.attributes[k]}'`;\n            }\n        }\n        return '<input type=\"text\" data-ax6grid-editor=\"number\" value=\"' + _value + '\" ' + attributesText + '\" />';\n    },\n    init: function (_root, _columnKey, _editor, _$parent, _value) {\n        var $el;\n        _$parent.append($el = jQuery(this.getHtml(_root, _columnKey, _editor, _value)));\n        this.bindUI(_root, _columnKey, $el, _editor, _$parent, _value);\n        $el.on(\"blur\", function () {\n            BODY.inlineEdit.deActive.call(_root, \"RETURN\", _columnKey);\n        });\n        return $el;\n    },\n    bindUI: function (_root, _columnKey, _$el, _editor, _$parent, _value) {\n        _$el.data(\"binded-ax5ui\", \"ax5formater\");\n        _$el.ax5formatter($.extend(true, {\n            pattern: \"number\"\n        }, _editor.config));\n        _$el.focus().select();\n    }\n};\n\nconst edit_date = {\n    useReturnToSave: true,\n    editMode: \"popup\",\n    getHtml: function (_root, _columnKey, _editor, _value) {\n        return '<input type=\"text\" data-ax6grid-editor=\"calendar\" value=\"' + _value + '\" >';\n    },\n    init: function (_root, _columnKey, _editor, _$parent, _value) {\n        var $el;\n        _$parent.append($el = jQuery(this.getHtml(_root, _columnKey, _editor, _value)));\n        this.bindUI(_root, _columnKey, $el, _editor, _$parent, _value);\n        return $el;\n    },\n    bindUI: function (_root, _columnKey, _$el, _editor, _$parent, _value) {\n        var self = _root;\n        _$el.data(\"binded-ax5ui\", \"ax5picker\");\n\n        _$el.ax5picker($.extend(true, {\n            direction: \"auto\",\n            content: {\n                type: 'date',\n                formatter: {\n                    pattern: 'date'\n                }\n            },\n            onStateChanged: function () {\n                if (this.state == \"open\") {\n                    this.self.activePicker.attr(\"data-ax6grid-inline-edit-picker\", \"date\");\n                } else if (this.state == \"close\") {\n                    BODY.inlineEdit.deActive.call(self, \"RETURN\", _columnKey);\n                }\n            }\n        }, _editor.config));\n\n        _$el.focus().select();\n    }\n};\n\nconst edit_select = {\n    useReturnToSave: false,\n    editMode: \"popup\",\n    getHtml: function (_root, _columnKey, _editor, _value) {\n        var po = [];\n        po.push('<div data-ax5select=\"ax5grid-editor\" data-ax5select-config=\"{}\">');\n        po.push('</div>');\n\n        return po.join('');\n    },\n    init: function (_root, _columnKey, _editor, _$parent, _value) {\n        var $el;\n        _$parent.append($el = jQuery(this.getHtml(_root, _columnKey, _editor, _value)));\n        this.bindUI(_root, _columnKey, $el, _editor, _$parent, _value);\n        return $el;\n    },\n    bindUI: function (_root, _columnKey, _$el, _editor, _$parent, _value) {\n        var eConfig = {\n            columnKeys: {\n                optionValue: \"value\",\n                optionText: \"text\",\n                optionSelected: \"selected\"\n            }\n        };\n        jQuery.extend(true, eConfig, _editor.config);\n\n        eConfig.options.forEach(function (n) {\n            if (n[eConfig.columnKeys.optionValue] == _value) n[eConfig.columnKeys.optionSelected] = true;\n        });\n\n        var self = _root;\n        _$el.data(\"binded-ax5ui\", \"ax5select\");\n        _$el.ax5select($.extend(true, {\n            direction: \"auto\",\n            columnKeys: eConfig.columnKeys,\n            options: eConfig.options,\n            onStateChanged: function () {\n                if (this.state == \"open\") {\n                    this.self.activeSelectOptionGroup.attr(\"data-ax6grid-inline-edit-picker\", \"select\");\n                } else if (this.state == \"changeValue\") {\n                    BODY.inlineEdit.deActive.call(self, \"RETURN\", _columnKey, this.value[0][eConfig.columnKeys.optionValue]);\n                } else if (this.state == \"close\") {\n                    BODY.inlineEdit.deActive.call(self, \"ESC\", _columnKey);\n                }\n            }\n        }, _editor.config));\n        _$el.ax5select(\"open\");\n        _$el.ax5select(\"setValue\", _value);\n        _$el.find(\"a\").focus();\n    }\n};\n\nconst edit_checkbox = {\n    editMode: \"inline\",\n    getHtml: function (_root, _editor, _value) {\n\n        var lineHeight = (_root.config.body.columnHeight - _root.config.body.columnPadding * 2 - _root.config.body.columnBorderWidth);\n        var checked;\n        if (_editor.config && _editor.config.trueValue) {\n            checked = (_value == _editor.config.trueValue) ? \"true\" : \"false\";\n        } else {\n            checked = (_value == false || _value == \"false\" || _value < \"1\") ? \"false\" : \"true\";\n        }\n\n        var eConfig = {\n            marginTop: 2,\n            height: lineHeight - 4\n        };\n        jQuery.extend(true, eConfig, _editor.config);\n        eConfig.marginTop = (lineHeight - eConfig.height) / 2;\n\n        return '<div data-ax6grid-editor=\"checkbox\" data-ax6grid-checked=\"' + checked + '\" style=\"height:' + eConfig.height + 'px;width:' + eConfig.height + 'px;margin-top:' + eConfig.marginTop + 'px;\"></div>';\n    }\n};\n\nconst edit_textarea = {\n    useReturnToSave: false,\n    editMode: \"popup\",\n    _getHtml: function (_root, _columnKey, _editor, _value) {\n        // init 에서 사용하게 될 HTML 태그를 만들어 줍니다.\n        return `<div data-ax6grid-editor=\"textarea\"></div>`;\n    },\n    _bindUI: function (_root, _columnKey, _$el, _editor, _$parent, _value) {\n        // 위치와 크기를 구합니다.\n        let offset = _$el.offset();\n        let box = {\n            width: _$el.width()\n        };\n        let editorHeight = 150;\n        let buttonHeight = 30;\n\n        // 새로운 엘리먼트 생성\n        let $newDiv = jQuery(`<div data-ax6grid-popup=\"textarea\" style=\"z-index: 9999;\">\n    <textarea style=\"width:100%;height:${editorHeight-buttonHeight}px;\" class=\"form-control\">${_value}</textarea>\n    <div style=\"height:${buttonHeight}px;padding:5px;text-align: right;\">\n        <button class=\"btn btn-default\">OK</button>\n    </div>\n</div>`);\n        let $newTextarea = $newDiv.find(\"textarea\");\n        // 엘리먼트에 CSS 적용\n        $newDiv.css({\n            position: \"absolute\",\n            left: offset.left,\n            top: offset.top,\n            width: box.width,\n            height: editorHeight\n        });\n        $newDiv.find(\"textarea\");\n\n        // 새로운 엘리먼트를 document.body에 append\n        jQuery(document.body).append($newDiv);\n        $newTextarea.focus().select();\n\n        $newTextarea.on(\"blur\", function (e) {\n            BODY.inlineEdit.deActive.call(_root, \"RETURN\", _columnKey, this.value);\n            $newDiv.remove();\n            ax5.util.stopEvent(e.originalEvent);\n        });\n        $newTextarea.on(\"keydown\", function (e) {\n            if(e.which == ax5.info.eventKeys.ESC){\n                BODY.inlineEdit.deActive.call(_root, \"ESC\", _columnKey);\n                $newDiv.remove();\n                ax5.util.stopEvent(e.originalEvent);\n            }\n        });\n\n        /// 값 변경\n        /// BODY.inlineEdit.deActive.call(_root, \"RETURN\", _columnKey, this.value[0][eConfig.columnKeys.optionValue]);\n        /// 에디팅 취소\n        /// BODY.inlineEdit.deActive.call(_root, \"ESC\", _columnKey);\n    },\n\n    init: function (_root, _columnKey, _editor, _$parent, _value) {\n        // 인라인 에디팅 활성화 시작\n        /**\n         * _root : gridInstance\n         * _columnKey : di + \"_\" + col.colIndex + \"_\" + col.rowIndex\n         * _editor : col.editor\n         * _$parent : 셀\n         * _value : 값\n         */\n        let $el;\n        _$parent.append($el = jQuery(this._getHtml(_root, _columnKey, _editor, _value)));\n        // 셀에 HTML 컨텐츠 추가\n\n        this._bindUI(_root, _columnKey, $el, _editor, _$parent, _value);\n        // 이벤트 바인딩\n\n        return $el;\n    },\n};\n\nexport default {\n    \"text\": edit_text,\n    \"money\": edit_money,\n    \"number\": edit_number,\n    \"date\": edit_date,\n    \"select\": edit_select,\n    \"checkbox\": edit_checkbox,\n    \"textarea\": edit_textarea\n};"]}