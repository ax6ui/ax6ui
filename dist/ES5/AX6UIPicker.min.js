"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_jqmin=require("jqmin"),_jqmin2=_interopRequireDefault(_jqmin),_AX6UICore2=require("./AX6UICore"),_AX6UICore3=_interopRequireDefault(_AX6UICore2),_AX6Info=require("./AX6Info"),_AX6Info2=_interopRequireDefault(_AX6Info),_AX6Util=require("./AX6Util"),_AX6Util2=_interopRequireDefault(_AX6Util),_AX6Mustache=require("./AX6Mustache"),_AX6Mustache2=_interopRequireDefault(_AX6Mustache),_AX6UIFormatter=require("./AX6UIFormatter"),_AX6UIFormatter2=_interopRequireDefault(_AX6UIFormatter),_AX6UICalendar=require("./AX6UICalendar"),_AX6UICalendar2=_interopRequireDefault(_AX6UICalendar),_AX6UIPalette=require("./AX6UIPalette"),_AX6UIPalette2=_interopRequireDefault(_AX6UIPalette);require("./AX6UIPicker/index.scss");var tmpl={pickerTmpl:function(t){return'\n<div data-ax6ui-picker="" class="{{theme}}" id="{{id}}" data-picker-els="root" {{#zIndex}}style="z-index:{{zIndex}};"{{/zIndex}}>\n    {{#title}}\n        <div class="ax-picker-heading">{{title}}</div>\n    {{/title}}\n    <div class="ax-picker-body">\n        <div class="ax-picker-content" data-picker-els="content" style="width:{{contentWidth}}px;"></div>\n        {{#btns}}\n            <div class="ax-picker-buttons">\n            {{#btns}}\n                {{#@each}}\n                <button data-picker-btn="{{@key}}" class="{{@value.theme}}">{{@value.label}}</button>\n                {{/@each}}\n            {{/btns}}\n            </div>\n        {{/btns}}\n    </div>\n    <div class="ax-picker-arrow"></div>\n</div>\n'}},onStateChanged=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},bindPickerTarget=function(){var t={focus:function(t,e){this.open(t)},click:function(t,e){this.open(t)}},e={"@fn":function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};n>1&&(a.btns={ok:{label:this.config.lang.ok,theme:this.config.theme}}),this.queue[t]=_jqmin2.default.extend(!0,a,i),a=null,n=null},date:function(t,e){var i=this.queue[t],n=i.content?i.content.width||270:270,a=i.content?i.content.margin||5:5,l=e.length,u={contentWidth:n*l+(l-1)*a,content:{width:n,margin:a},inputLength:l||1};l>1&&!i.btns&&(u.btns={ok:{label:this.config.lang.ok,theme:this.config.theme}}),this.queue[t]=_jqmin2.default.extend(!0,u,i),n=null,a=null,u=null,l=null},"secure-num":function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=_jqmin2.default.extend(!0,a,i),a=null,n=null},keyboard:function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=_jqmin2.default.extend(!0,a,i),a=null,n=null},numpad:function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=_jqmin2.default.extend(!0,a,i),a=null,n=null},color:function(t,e){var i=this.queue[t],n=i.content?i.content.width||270:270,a=i.content?i.content.margin||5:5,l=e.length,u={contentWidth:n*l+(l-1)*a,content:{width:n,margin:a},inputLength:l||1},r=i.$target.find('[data-ax6picker-color="preview"]');r.get(0)&&(r.css({"background-color":"#"+_AX6Util2.default.color(e.val()||"#000000").getHexValue()}),e.on("change",function(){r.css({"background-color":"#"+_AX6Util2.default.color(this.value||"#000000").getHexValue()})})),l>1&&!i.btns&&(u.btns={ok:{label:this.config.lang.ok,theme:this.config.theme}}),this.queue[t]=_jqmin2.default.extend(!0,u,i),n=null,a=null,u=null,l=null}};return function(i){var n=this.queue[i],a=void 0;if(!n.content)return console.log(_AX6Info2.default.getError("ax6picker","501","bind")),this;if(a="INPUT"==n.$target.get(0).tagName.toUpperCase()?n.$target:n.$target.find("input[type]"),_AX6Util2.default.isFunction(n.content))e["@fn"].call(this,i,a);else for(var l in e)if(n.content.type==l){e[l].call(this,i,a);break}return a.off("focus.ax6picker").off("click.ax6picker").on("focus.ax6picker",t.focus.bind(this,i)).on("click.ax6picker",t.click.bind(this,i)),n.$target.find(".input-group-addon").off("click.ax6picker").on("click.ax6picker",t.click.bind(this,i)),n.content.formatter&&this.formatter.bind(_jqmin2.default.extend({},n.content.formatter,{target:a})),a=null,n=null,i=null,this}}(),alignPicker=function(t){if(!this.activePicker)return this;var e=function(e){var i=(0,_jqmin2.default)(window),n=(0,_jqmin2.default)(document.body),a={},l={},u={},r=void 0;a=e.$target.offset(),l={width:e.$target.outerWidth(),height:e.$target.outerHeight()},u={winWidth:Math.max(i.width(),n.width()),winHeight:Math.max(i.height(),n.height()),width:this.activePicker.outerWidth(),height:this.activePicker.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction?r=e.direction:(r="top",a.top-u.height-12<0?r="top":a.top+l.height+u.height+12>u.winHeight&&(r="bottom")),t&&this.activePicker.addClass("direction-"+r);var o=function(){var t={left:0,top:0};switch(r){case"top":t.left=a.left+l.width/2-u.width/2,t.top=a.top+l.height+12;break;case"bottom":t.left=a.left+l.width/2-u.width/2,t.top=a.top-u.height-12;break;case"left":t.left=a.left+l.width+12,t.top=a.top-u.height/2+l.height/2;break;case"right":t.left=a.left-u.width-12,t.top=a.top-u.height/2+l.height/2}return t}();"top"!=r&&"bottom"!=r||(o.left<0?(o.left=12,this.activePickerArrow.css({left:a.left+l.width/2-o.left})):o.left+u.width>u.winWidth&&(o.left=u.winWidth-u.width-12,this.activePickerArrow.css({left:a.left+l.width/2-o.left}))),this.activePicker.css(o)},i=this.queue[this.activePickerQueueIndex];t&&(this.activePicker.css({top:-999}),(0,_jqmin2.default)(document.body).append(this.activePicker)),setTimeout(function(){e.call(this,i)}.bind(this))},onBodyClick=function(t,e){if(!this.activePicker)return this;var i=this.queue[this.activePickerQueueIndex];return _AX6Util2.default.findParentNode(t.target,function(t){return!!t.getAttribute("data-picker-els")||(i.$target.get(0)==t||void 0)})?this:(this.close(),this)},onBtnClick=function(t,e){if(t.srcElement&&(t.target=t.srcElement),e=_AX6Util2.default.findParentNode(t.target,function(t){if(t.getAttribute("data-picker-btn"))return!0})){var i=this.queue[this.activePickerQueueIndex],n=e.getAttribute("data-picker-btn");if(i.btns&&i.btns[n].onClick){var a={key:n,value:i.btns[n],self:this,item:i};i.btns[n].onClick.call(a,n)}else this.close()}},onBodyKeyup=function(t){t.keyCode==_AX6Info2.default.eventKeys.ESC&&this.close()},getQueIdx=function(t){_AX6Util2.default.isString(t)||(t=(0,_jqmin2.default)(t).data("data-axpicker-id"));{if(_AX6Util2.default.isString(t))return _AX6Util2.default.search(this.queue,function(){return this.id==t});console.log(_AX6Info2.default.getError("ax6picker","402","getQueIdx"))}},AX6UIPicker=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.config={clickEventName:"click",theme:"default",title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:100,calendar:{multipleSelect:!1,control:{left:"&#x02190",yearTmpl:"%s",monthTmpl:"%s",right:"&#x02192",yearFirst:!0}},palette:{},formatter:{}},_jqmin2.default.extend(!0,i.config,t),i.queue=[],i.activePicker=null,i.activePickerQueueIndex=-1,i.openTimer=null,i.closeTimer=null,i.init(),i}return _inherits(e,_AX6UICore3.default),_createClass(e,[{key:"init",value:function(){this.onStateChanged=this.config.onStateChanged,delete this.config.onStateChanged,this.initOnce()}},{key:"initOnce",value:function(){if(this.initialized)return this;this.initialized=!0,this.formatter=new _AX6UIFormatter2.default}},{key:"bind",value:function(t){var e={},i=void 0;return(t=_jqmin2.default.extend(!0,e,this.config,t)).target?(t.$target=(0,_jqmin2.default)(t.target),t.$target.get(0)?(t.id||(t.id=t.$target.data("data-axpicker-id")),t.id||(t.id="ax6-picker-"+_AX6UICore3.default.getInstanceId(),t.$target.data("data-axpicker-id",t.id)),-1===(i=_AX6Util2.default.search(this.queue,function(){return this.id==t.id}))?(this.queue.push(t),bindPickerTarget.call(this,this.queue.length-1)):(this.queue[i]=_jqmin2.default.extend(!0,{},this.queue[i],t),bindPickerTarget.call(this,i)),e=null,i=null,this):(console.log(_AX6Info2.default.getError("ax6picker","401","bind")),this)):(console.log(_AX6Info2.default.getError("ax6picker","401","bind")),this)}},{key:"setContentValue",value:function(t,e,i,n){var a={date:function(t,e,i){var n,a,l=[];return"INPUT"!==t.$target.get(0).tagName.toUpperCase()&&t.$target.find("input[type]").each(function(){l.push(this.value)}),0==e?(l.length>1&&""!==l[1]?_AX6Util2.default.dday(l[1],{today:l[0]})<0&&(a=i):a=i,a&&(t.pickerCalendar[1].calendar.setSelection([a],!1).changeMode("d",a),this.setContentValue(t.id,1,a)),i):1==e?(l.length>1&&_AX6Util2.default.dday(l[1],{today:l[0]})<0&&(n=l[1]),n&&(t.pickerCalendar[0].calendar.setSelection([n],!1).changeMode("d",n),this.setContentValue(t.id,0,n)),i):void 0}},l=_AX6Util2.default.isNumber(t)?t:getQueIdx.call(this,t),u=this.queue[l],r=void 0;if(n||(n={}),u){if((r="INPUT"==u.$target.get(0).tagName.toUpperCase()?u.$target:(0,_jqmin2.default)(u.$target.find("input[type]").get(e))).val(i),u.disableChangeTrigger){var o=u.$target.find('[data-ax6picker-color="preview"]');o.get(0)&&o.css({"background-color":i})}else r.trigger("change");u.inputLength>1&&a[u.content.type]&&(i=a[u.content.type].call(this,u,e,i));var c={self:this,state:"changeValue",item:u,inputIndex:e,value:i,values:[i]};"INPUT"!==u.$target.get(0).tagName.toUpperCase()&&(c.values=[],u.$target.find("input[type]").each(function(){c.values.push(this.value)})),onStateChanged.call(this,u,c),1!=u.inputLength||n.doNotClose||this.close()}return u=null,t=null,e=null,i=null,this}},{key:"getContentValue",value:function(t,e){var i=_AX6Util2.default.isNumber(t)?t:getQueIdx.call(this,t),n=this.queue[i];return n?("INPUT"==n.$target.get(0).tagName.toUpperCase()?n.$target:(0,_jqmin2.default)(n.$target.find("input[type]").get(e))).val():(n=null,t=null,e=null,this)}},{key:"open",value:function(t,e){var i=this,n={"@fn":function(t,e){var i=this.queue[t];return i.content.call(i,function(t){e(t)}),!0},date:function(t){for(var e=this.queue[t],i=[],n=_jqmin2.default.extend({},this.config.calendar,{displayDate:new Date}),l="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:e.$target.find("input[type]"),u=0;u<e.inputLength;u++)i.push('<div style="width:'+_AX6Util2.default.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-calendar-target="'+u+'"></div>'),u<e.inputLength-1&&i.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');i.push('<div style="clear:both;"></div>'),e.pickerContent.html(i.join("")),e.pickerCalendar=[],e.pickerContent.find("[data-calendar-target]").each(function(){var t=this.getAttribute("data-calendar-target"),i=l.get(t).value,u=_AX6Util2.default.date(i),r={year:function(t){return _AX6Util2.default.date(t,{return:"yyyy"})},month:function(t){return _AX6Util2.default.date(t,{return:"yyyy-MM"})},day:function(t){return t}};n.displayDate=u,i&&(n.selection=[u]),(n=_jqmin2.default.extend(!0,n,e.content.config||{})).target=this,n.onClick=function(){a.setContentValue(e.id,t,r[n.selectMode||"day"](this.date))},e.pickerCalendar.push({itemId:e.id,inputIndex:t,calendar:new _AX6UICalendar2.default(n)})})},"secure-num":function(t){for(var e=this,i=this.queue[t],n=[],a=0;a<i.inputLength;a++)n.push('<div style="width:'+_AX6Util2.default.cssNumber(i.content.width)+';float:left;" class="ax-picker-content-box" data-secure-num-target="'+a+'"></div>'),a<i.inputLength-1&&n.push('<div style="width:'+i.content.margin+'px;float:left;height: 5px;"></div>');n.push('<div style="clear:both;"></div>'),i.pickerContent.html(n.join("")),i.pickerContent.find("[data-secure-num-target]").each(function(t,n){var a=n.getAttribute("data-secure-num-target"),l=[],u=[{label:"&#x02190",fn:"back"},{label:"C",fn:"clear"}];(function(t){var e=void 0,i=void 0,n=void 0;for(n=t.length;n;n-=1)e=Math.floor(Math.random()*n),i=t[n-1],t[n-1]=t[e],t[e]=i;return t})([0,1,2,3,4,5,6,7,8,9]).forEach(function(t){l.push('<div style="float:left;'+i.content.config.btnWrapStyle+'">'),l.push('<button class="'+i.content.config.btnTheme+'" style="'+i.content.config.btnStyle+'" data-secure-num-value="'+t+'">'+t+"</button>"),l.push("</div>")}),u.forEach(function(t){l.push('<div style="float:left;'+i.content.config.btnWrapStyle+'">'),l.push('<button class="'+i.content.config.specialBtnTheme+'" style="'+i.content.config.btnStyle+'" data-secure-num-value="'+t.fn+'">'+t.label+"</button>"),l.push("</div>")}),l.push('<div style="clear:both;"></div>'),$(n).html(l.join("")).on("click","[data-secure-num-value]",function(t){var n=t.currentTarget.getAttribute("data-secure-num-value"),l="INPUT"==i.$target.get(0).tagName.toUpperCase()?i.$target:(0,_jqmin2.default)(i.$target.find("input[type]").get(a)),u=l.val();"back"==n?l.val(u.substring(0,u.length-1)):"clear"==n?l.val(""):l.val(u+n),onStateChanged.call(e,i,{self:e,state:"changeValue",item:i,value:l.val()})})})},keyboard:function(t){for(var e=this.queue[t],i=[],n=0;n<e.inputLength;n++)i.push('<div style="width:'+_AX6Util2.default.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-keyboard-target="'+n+'"></div>'),n<e.inputLength-1&&i.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');i.push('<div style="clear:both;"></div>'),e.pickerContent.html(i.join(""));var l=[[{value:"`",shiftValue:"~"},{value:"1",shiftValue:"!"},{value:"2",shiftValue:"@"},{value:"3",shiftValue:"#"},{value:"4",shiftValue:"$"},{value:"5",shiftValue:"%"},{value:"6",shiftValue:"^"},{value:"7",shiftValue:"&"},{value:"8",shiftValue:"*"},{value:"9",shiftValue:"("},{value:"0",shiftValue:")"},{value:"-",shiftValue:"_"},{value:"=",shiftValue:"+"},{label:"&#x02190",fn:"back"}],[{value:"q",shiftValue:"Q"},{value:"w",shiftValue:"W"},{value:"e",shiftValue:"E"},{value:"r",shiftValue:"R"},{value:"t",shiftValue:"T"},{value:"y",shiftValue:"Y"},{value:"u",shiftValue:"U"},{value:"i",shiftValue:"I"},{value:"o",shiftValue:"O"},{value:"p",shiftValue:"P"},{value:"[",shiftValue:"{"},{value:"]",shiftValue:"}"},{value:"\\",shiftValue:"|"}],[{label:"Clear",fn:"clear"},{value:"a",shiftValue:"A"},{value:"s",shiftValue:"S"},{value:"d",shiftValue:"D"},{value:"f",shiftValue:"F"},{value:"g",shiftValue:"G"},{value:"h",shiftValue:"H"},{value:"j",shiftValue:"J"},{value:"k",shiftValue:"K"},{value:"l",shiftValue:"L"},{value:";",shiftValue:":"},{value:"'",shiftValue:'"'}],[{label:"Shift",fn:"shift"},{value:"z",shiftValue:"Z"},{value:"x",shiftValue:"X"},{value:"c",shiftValue:"C"},{value:"v",shiftValue:"V"},{value:"b",shiftValue:"B"},{value:"n",shiftValue:"N"},{value:"m",shiftValue:"M"},{value:",",shiftValue:"<"},{value:".",shiftValue:">"},{value:"/",shiftValue:"?"},{label:"Close",fn:"close"}]],u=function(t){var i=[];return l.forEach(function(n){i.push('<div style="display: table;margin:0 auto;">'),n.forEach(function(n){var a=void 0,l=void 0,u=void 0,r=void 0,o=void 0;n.fn?(a=n.fn,l=n.label,u=e.content.config.specialBtnWrapStyle,r=e.content.config.specialBtnTheme,o=e.content.config.specialBtnStyle):(l=a=t?n.shiftValue:n.value,u=e.content.config.btnWrapStyle,r=e.content.config.btnTheme,o=e.content.config.btnStyle),i.push('<div style="display: table-cell;'+u+'">'),i.push('<button class="'+r+'" style="'+o+'" data-keyboard-value="'+a+'">'+l+"</button>"),i.push("</div>")}),i.push("</div>")}),i.join("")};e.pickerContent.find("[data-keyboard-target]").each(function(){var t=this.getAttribute("data-keyboard-target"),i=$(this),n=!1,l=function(){n=!n,i.html(u(n))};i.html(u(n)).on("mousedown","[data-keyboard-value]",function(){var i=this.getAttribute("data-keyboard-value"),n="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:(0,_jqmin2.default)(e.$target.find("input[type]").get(t)),u=n.val();switch(i){case"back":n.val(u.substring(0,u.length-1));break;case"clear":n.val("");break;case"shift":return l(),!1;case"close":return a.close(),!1;default:n.val(u+i)}onStateChanged.call(this,e,{self:a,state:"changeValue",item:e,value:n.val()})})})},numpad:function(t){for(var e=this.queue[t],i=[],n=0;n<e.inputLength;n++)i.push('<div style="width:'+_AX6Util2.default.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-numpad-target="'+n+'"></div>'),n<e.inputLength-1&&i.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');i.push('<div style="clear:both;"></div>'),e.pickerContent.html(i.join("")),e.pickerContent.find("[data-numpad-target]").each(function(){var t=this.getAttribute("data-numpad-target"),i=[];(e.content.config.keyArray||[{value:"7"},{value:"8"},{value:"9"},{label:"BS",fn:"back"},{value:"4"},{value:"5"},{value:"6"},{label:"CLS",fn:"clear"},{value:"1"},{value:"2"},{value:"3"},{value:""},{value:"."},{value:"0"},{value:""},{label:"OK",fn:"enter"}]).forEach(function(t){var n=void 0,a=void 0,l=void 0,u=void 0,r=void 0;t.fn?(n=t.fn,a=t.label,u=e.content.config.specialBtnTheme,l=e.content.config.specialBtnWrapStyle,r=e.content.config.specialBtnStyle):(a=n=t.value,u=n?e.content.config.btnTheme:"",l=e.content.config.btnWrapStyle,r=e.content.config.btnStyle),i.push('<div style="float:left;'+l+'">'),i.push('<button class="btn btn-default btn-'+u+'" style="'+r+'" data-numpad-value="'+n+'">'+(a||"&nbsp;")+"</button>"),i.push("</div>")}),i.push('<div style="clear:both;"></div>'),$(this).html(i.join("")).on("mousedown","[data-numpad-value]",function(){var i=this.getAttribute("data-numpad-value"),n="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:(0,_jqmin2.default)(e.$target.find("input[type]").get(t)),l=n.val(),u="";switch(i){case"back":u="changeValue",n.val(l.substring(0,l.length-1));break;case"clear":u="changeValue",n.val("");break;case"enter":return a.close(e,"enter"),!1;case"close":return a.close(),!1;default:u="changeValue",n.val(l+i)}onStateChanged.call(this,e,{self:a,state:u,item:e,value:n.val()})})})},color:function(t){for(var e=this.queue[t],i=[],n=_jqmin2.default.extend({},this.config.palette),l="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:e.$target.find("input[type]"),u=0;u<e.inputLength;u++)i.push('<div style="padding: 5px;width:'+_AX6Util2.default.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-palette-target="'+u+'" data-ax5palette="ax6picker-'+e.id+'"></div>'),u<e.inputLength-1&&i.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');i.push('<div style="clear:both;"></div>'),e.pickerContent.html(i.join("")),e.pickerPalette=[],e.pickerContent.find("[data-palette-target]").each(function(){var t=this.getAttribute("data-palette-target"),i=l.get(t).value;n.selectedColor=i,(n=_jqmin2.default.extend(!0,n,e.content.config||{})).target=this,n.onClick=function(i){a.setContentValue(e.id,t,i)},n.onUpdateColor=function(i){a.setContentValue(e.id,t,i,{doNotClose:!0})},e.pickerPalette.push({itemId:e.id,inputIndex:t,palette:new _AX6UIPalette2.default(n)})})}},a=this,l=_AX6Util2.default.isNumber(t)?t:getQueIdx.call(this,t),u=this.queue[l];return this.openTimer&&clearTimeout(this.openTimer),this.activePicker?this.activePickerQueueIndex==l?this:e>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(l,(e||0)+1)}.bind(this),this.config.animateTime),this):(this.activePicker=(0,_jqmin2.default)(_AX6Mustache2.default.render(tmpl.pickerTmpl.call(this),u)),this.activePickerArrow=this.activePicker.find(".ax-picker-arrow"),this.activePickerQueueIndex=l,u.pickerContent=this.activePicker.find('[data-picker-els="content"]'),_AX6Util2.default.isFunction(u.content)?(u.pickerContent.html("Loading.."),n["@fn"].call(this,l,function(t){u.pickerContent.html(t)})):u.content.type in n&&n[u.content.type].call(this,l),this.activePicker.find("[data-picker-btn]").on(this.config.clickEventName,function(t){onBtnClick.call(this,t||window.event,l)}.bind(this)),alignPicker.call(this,"append"),(0,_jqmin2.default)(window).on("resize.ax6picker",_AX6Util2.default.throttle(function(t){alignPicker.call(this,t||window.event)},100).bind(this)).on("keyup.ax6picker",function(t){t=t||window.event,onBodyKeyup.call(i,t),_AX6Util2.default.stopEvent(t)}).on("click.ax6picker",function(t){t=t||window.event,onBodyClick.call(i,t),_AX6Util2.default.stopEvent(t)}),onStateChanged.call(this,u,{self:this,state:"open",item:u}),this)}},{key:"close",value:function(t,e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activePicker?(t=this.queue[this.activePickerQueueIndex],this.activePicker.addClass("destroy"),(0,_jqmin2.default)(window).off("resize.ax6picker"),(0,_jqmin2.default)(window).off("click.ax6picker"),(0,_jqmin2.default)(window).off("keyup.ax6picker"),this.closeTimer=setTimeout(function(){this.activePicker&&this.activePicker.remove(),this.activePicker=null,this.activePickerQueueIndex=-1,onStateChanged.call(this,t,{self:this,state:e||"close"})}.bind(this),this.config.animateTime),this):this}}]),e}();exports.default=AX6UIPicker;
//# sourceMappingURL=AX6UIPicker.js.map
