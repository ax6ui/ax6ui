{"version":3,"sources":["AX6UIMask.js"],"names":["_jqmin","require","_AX6UICore2","_AX6Util","_AX6Mustache","getBodyTmpl","data","columnKeys","_AX6Mustache2","default","render","call","this","onStateChanged","opts","that","setBody","content","AX6UIMask","config","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","theme","target","_jqmin2","document","body","get","animateTime","extend","maskContent","status","activeConfig","init","onClick","initOnce","initialized","options","_this2","close","_cfg","$target","maskId","instanceId","$mask","css","templateName","trim","append","position","left","offset","top","width","outerWidth","height","outerHeight","addClass","window","on","_AX6Util2","throttle","e","align","bind","zIndex","self","type","removeClass","off","delay","_close","remove","state"],"mappings":"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","file":"AX6UIMask.js","sourcesContent":["import jQuery from \"jqmin\";\nimport AX6UICore from \"./AX6UICore.js\";\nimport U from \"./AX6Util\";\nimport mustache from \"./AX6Mustache.js\";\n/** ~~~~~~~~~~~~~~~~~~ end of import  ~~~~~~~~~~~~~~~~~~~~ **/\n\nconst getBodyTmpl = function (data, columnKeys) {\n  const defaultMask = function (columnKeys) {\n    return `\n            <div data-ax6ui-mask=\"\" class=\"{{theme}}\" id=\"{{maskId}}\">\n                <div class=\"ax-mask-bg\"></div>\n                <div class=\"ax-mask-content\">\n                    <div class=\"ax-mask-body\">\n                    {{{body}}}\n                    </div>\n                </div>\n            </div>\n        `;\n  };\n  return mustache.render(defaultMask.call(this, columnKeys), data);\n};\nconst onStateChanged = function (opts, that) {\n  if (opts && opts.onStateChanged) {\n    opts.onStateChanged.call(that, that);\n  }\n  else if (this.onStateChanged) {\n    this.onStateChanged.call(that, that);\n  }\n\n  opts = null;\n  that = null;\n  return true;\n};\nconst setBody = function (content) {\n  this.maskContent = content;\n};\n/** ~~~~~~~~~~~~~~~~~~ end of private  ~~~~~~~~~~~~~~~~~~~~ **/\n\n/**\n * @class\n */\nclass AX6UIMask extends AX6UICore {\n  /**\n   * @constructor\n   * @param config\n   */\n  constructor(config) {\n    super();\n\n    /**\n     * @member {JSON}\n     * @param config\n     * @param [config.theme]\n     * @param [config.target=document.body]\n     * @param [config.animateTime=250]\n     * @param [config.onStateChanged]\n     * @param [config.onClick]\n     * @param [config.content]\n     *\n     */\n    this.config = {\n      theme: '',\n      target: jQuery(document.body).get(0),\n      animateTime: 250\n    };\n    jQuery.extend(true, this.config, config);\n\n    // 멤버 변수 초기화\n    /**\n     * @member {String}\n     */\n    this.maskContent = '';\n    /**\n     * @member {String}\n     */\n    this.status = \"off\";\n    /**\n     * @member {JSON}\n     */\n    this.activeConfig = {};\n\n    if (typeof config !== \"undefined\") this.init();\n  }\n\n  /**\n   * @method\n   */\n  init() {\n    this.onStateChanged = this.config.onStateChanged;\n    delete this.config.onStateChanged;\n    this.onClick = this.config.onClick;\n    delete this.config.onClick;\n\n    setBody.call(this, this.config.content || \"\");\n\n    // init 호출 여부\n    this.initOnce();\n  }\n\n  /**\n   * @method\n   */\n  initOnce() {\n    if (this.initialized) return this;\n    this.initialized = true;\n  }\n\n  /**\n   * @method\n   * @param options\n   * @param {number} [options.zIndex] - 마스크 엘리먼트의 z-index 값을 정합니다\n   * @return {AX6UIMask}\n   * @example\n   * ```js\n   * let myMask = new Mask();\n   * myMask.setConfig({\n     *  zIndex: 1000\n     * });\n   *\n   * myMask.open();\n   * ```\n   */\n  open(options) {\n    if (this.status === \"on\") this.close();\n    setBody.call(this, (options) ? options.content || \"\" : \"\");\n\n    let _cfg = jQuery.extend(true, this.config, options),\n      target = _cfg.target,\n      $target = jQuery(target),\n      maskId = 'ax-mask-' + this.instanceId,\n      $mask,\n      css = {},\n      that = {},\n      templateName = _cfg.templateName,\n      body = getBodyTmpl({\n        theme: _cfg.theme,\n        maskId: maskId,\n        body: this.maskContent,\n        templateName: templateName\n      }).trim();\n\n    jQuery(document.body).append(body);\n\n    // 마스크의 타겟이 html body 가 아니라면\n    if (target && target !== jQuery(document.body).get(0)) {\n      css = {\n        position: _cfg.position || \"absolute\",\n        left: $target.offset().left,\n        top: $target.offset().top,\n        width: $target.outerWidth(),\n        height: $target.outerHeight()\n      };\n\n      $target.addClass(\"ax-masking\");\n\n      // 마스크의 타겟이 html body가 아닌경우 window resize 이벤트를 추적하여 엘리먼트 마스크의 CSS 속성 변경\n      jQuery(window).on(\"resize.ax5mask-\" + this.instanceId, U.throttle(function (e) {\n        this.align();\n      }, 100).bind(this));\n    }\n\n    if (typeof _cfg.zIndex !== \"undefined\") {\n      css[\"z-index\"] = _cfg.zIndex;\n    }\n\n    this.$mask = $mask = jQuery(\"#\" + maskId);\n    this.$target = $target;\n    this.status = \"on\";\n    $mask.css(css);\n\n    if (this.onClick) {\n      $mask.on(\"click\", (e) => {\n        that = {\n          self: this,\n          state: \"open\",\n          type: \"click\"\n        };\n        this.onClick.call(that, that);\n      });\n    }\n\n    onStateChanged.call(this, null, {\n      self: this,\n      state: \"open\"\n    });\n\n    // 현재 활성화된 설정 기억\n    this.activeConfig = _cfg;\n\n    options = null;\n    _cfg = null;\n    target = null;\n    $target = null;\n    maskId = null;\n    $mask = null;\n    css = null;\n    that = null;\n    templateName = null;\n    body = null;\n\n    return this;\n  }\n\n  /**\n   * @method\n   * @param delay\n   * @return {AX6UIMask}\n   */\n  close(delay) {\n    if (this.$mask) {\n\n      let _close = function () {\n        this.status = \"off\";\n        this.$mask.remove();\n        this.$target.removeClass(\"ax-masking\");\n\n        onStateChanged.call(this, null, {\n          self: this,\n          state: \"close\"\n        });\n\n        jQuery(window).off(\"resize.ax5mask-\" + this.instanceId);\n      };\n\n      if (delay) {\n        setTimeout((function () {\n          _close.call(this);\n        }).bind(this), delay);\n      } else {\n        _close.call(this);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @method\n   * @return {AX6UIMask}\n   */\n  fadeOut() {\n    if (this.$mask) {\n      let _close = function () {\n        this.status = \"off\";\n        this.$mask.remove();\n        this.$target.removeClass(\"ax-masking\");\n\n        onStateChanged.call(this, null, {\n          self: this,\n          state: \"close\"\n        });\n\n        jQuery(window).off(\"resize.ax5mask-\" + this.instanceId);\n      };\n\n\n      this.$mask.addClass(\"fade-out\");\n      setTimeout((function () {\n        _close.call(this);\n      }).bind(this), this.activeConfig.animateTime);\n    }\n    return this;\n  }\n\n  /**\n   * @method\n   * @return {AX6UIMask}\n   */\n  align() {\n    if (this.$mask && this.activeConfig && this.activeConfig.target && this.activeConfig.target !== jQuery(document.body).get(0)) {\n      try {\n        let css = {\n          position: this.activeConfig.position || \"absolute\",\n          left: this.$target.offset().left,\n          top: this.$target.offset().top,\n          width: this.$target.outerWidth(),\n          height: this.$target.outerHeight()\n        };\n        this.$mask.css(css);\n      }\n      catch (e) {\n\n      }\n    }\n    return this;\n  }\n}\n\nexport default AX6UIMask;"]}