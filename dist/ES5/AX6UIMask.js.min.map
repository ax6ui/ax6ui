{"version":3,"sources":["AX6UIMask.js"],"names":["_jqmin","require","_AX6UICore2","_AX6Util","_AX6Mustache","getBodyTmpl","data","columnKeys","_AX6Mustache2","default","render","call","this","onStateChanged","opts","that","setBody","content","AX6UIMask","maskContent","_this","config","theme","target","_jqmin2","document","body","get","animateTime","extend","status","activeConfig","init","onClick","initOnce","initialized","options","_this2","close","_cfg","$target","maskId","instanceId","$mask","css","templateName","trim","append","position","left","offset","top","width","outerWidth","height","outerHeight","addClass","window","on","_AX6Util2","throttle","e","align","bind","zIndex","self","type","removeClass","off","delay","_close","remove","state"],"mappings":"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","file":"AX6UIMask.js","sourcesContent":["import jQuery from \"jqmin\";\nimport AX6UICore from \"./AX6UICore.js\";\nimport U from \"./AX6Util\";\nimport mustache from \"./AX6Mustache.js\";\n/** ~~~~~~~~~~~~~~~~~~ end of import  ~~~~~~~~~~~~~~~~~~~~ **/\n\nconst getBodyTmpl = function (data, columnKeys) {\n  const defaultMask = function (columnKeys) {\n    return `\n            <div data-ax6ui-mask=\"\" class=\"{{theme}}\" id=\"{{maskId}}\">\n                <div class=\"ax-mask-bg\"></div>\n                <div class=\"ax-mask-content\">\n                    <div class=\"ax-mask-body\">\n                    {{{body}}}\n                    </div>\n                </div>\n            </div>\n        `;\n  };\n  return mustache.render(defaultMask.call(this, columnKeys), data);\n};\nconst onStateChanged = function (opts, that) {\n  if (opts && opts.onStateChanged) {\n    opts.onStateChanged.call(that, that);\n  }\n  else if (this.onStateChanged) {\n    this.onStateChanged.call(that, that);\n  }\n\n  opts = null;\n  that = null;\n  return true;\n};\nconst setBody = function (content) {\n  this.maskContent = content;\n};\n/** ~~~~~~~~~~~~~~~~~~ end of private  ~~~~~~~~~~~~~~~~~~~~ **/\n\n/**\n * @class\n */\nclass AX6UIMask extends AX6UICore {\n  /**\n   * @constructor\n   * @param config\n   * @param [config.theme]\n   * @param [config.target]\n   * @param [config.animateTime]\n   * @param [config.onStateChanged]\n   * @param [config.onClick]\n   * @param [config.content]\n   */\n  constructor(config) {\n    super();\n\n    /**\n     * @member {JSON}\n     * @param config\n     * @param [config.theme]\n     * @param [config.target=document.body]\n     * @param [config.animateTime=250]\n     * @param [config.onStateChanged]\n     * @param [config.onClick]\n     * @param [config.content]\n     *\n     */\n    this.config = {\n      theme: '',\n      target: jQuery(document.body).get(0),\n      animateTime: 250\n    };\n    jQuery.extend(true, this.config, config);\n\n    // 멤버 변수 초기화\n    /**\n     * @member {String}\n     */\n    this.maskContent = '';\n    /**\n     * @member {String}\n     */\n    this.status = \"off\";\n    /**\n     * @member {JSON}\n     */\n    this.activeConfig = {};\n\n    if (typeof config !== \"undefined\") this.init();\n  }\n\n  /**\n   * @method\n   */\n  init() {\n    this.onStateChanged = this.config.onStateChanged;\n    delete this.config.onStateChanged;\n    this.onClick = this.config.onClick;\n    delete this.config.onClick;\n\n    setBody.call(this, this.config.content || \"\");\n\n    // init 호출 여부\n    this.initOnce();\n  }\n\n  /**\n   * @method\n   */\n  initOnce() {\n    if (this.initialized) return this;\n    this.initialized = true;\n  }\n\n  /**\n   * @method\n   * @param options\n   * @param {number} [options.zIndex] - 마스크 엘리먼트의 z-index 값을 정합니다\n   * @return {AX6UIMask}\n   * @example\n   * ```js\n   * let myMask = new Mask();\n   * myMask.setConfig({\n     *  zIndex: 1000\n     * });\n   *\n   * myMask.open();\n   * ```\n   */\n  open(options) {\n    if (this.status === \"on\") this.close();\n    setBody.call(this, (options) ? options.content || \"\" : \"\");\n\n    let _cfg = jQuery.extend(true, this.config, options),\n      target = _cfg.target,\n      $target = jQuery(target),\n      maskId = 'ax-mask-' + this.instanceId,\n      $mask,\n      css = {},\n      that = {},\n      templateName = _cfg.templateName,\n      body = getBodyTmpl({\n        theme: _cfg.theme,\n        maskId: maskId,\n        body: this.maskContent,\n        templateName: templateName\n      }).trim();\n\n    jQuery(document.body).append(body);\n\n    // 마스크의 타겟이 html body 가 아니라면\n    if (target && target !== jQuery(document.body).get(0)) {\n      css = {\n        position: _cfg.position || \"absolute\",\n        left: $target.offset().left,\n        top: $target.offset().top,\n        width: $target.outerWidth(),\n        height: $target.outerHeight()\n      };\n\n      $target.addClass(\"ax-masking\");\n\n      // 마스크의 타겟이 html body가 아닌경우 window resize 이벤트를 추적하여 엘리먼트 마스크의 CSS 속성 변경\n      jQuery(window).on(\"resize.ax5mask-\" + this.instanceId, U.throttle(function (e) {\n        this.align();\n      }, 100).bind(this));\n    }\n\n    if (typeof _cfg.zIndex !== \"undefined\") {\n      css[\"z-index\"] = _cfg.zIndex;\n    }\n\n    this.$mask = $mask = jQuery(\"#\" + maskId);\n    this.$target = $target;\n    this.status = \"on\";\n    $mask.css(css);\n\n    if (this.onClick) {\n      $mask.on(\"click\", (e) => {\n        that = {\n          self: this,\n          state: \"open\",\n          type: \"click\"\n        };\n        this.onClick.call(that, that);\n      });\n    }\n\n    onStateChanged.call(this, null, {\n      self: this,\n      state: \"open\"\n    });\n\n    // 현재 활성화된 설정 기억\n    this.activeConfig = _cfg;\n\n    options = null;\n    _cfg = null;\n    target = null;\n    $target = null;\n    maskId = null;\n    $mask = null;\n    css = null;\n    that = null;\n    templateName = null;\n    body = null;\n\n    return this;\n  }\n\n  /**\n   * @method\n   * @param delay\n   * @return {AX6UIMask}\n   */\n  close(delay) {\n    if (this.$mask) {\n\n      let _close = function () {\n        this.status = \"off\";\n        this.$mask.remove();\n        this.$target.removeClass(\"ax-masking\");\n\n        onStateChanged.call(this, null, {\n          self: this,\n          state: \"close\"\n        });\n\n        jQuery(window).off(\"resize.ax5mask-\" + this.instanceId);\n      };\n\n      if (delay) {\n        setTimeout((function () {\n          _close.call(this);\n        }).bind(this), delay);\n      } else {\n        _close.call(this);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @method\n   * @return {AX6UIMask}\n   */\n  fadeOut() {\n    if (this.$mask) {\n      let _close = function () {\n        this.status = \"off\";\n        this.$mask.remove();\n        this.$target.removeClass(\"ax-masking\");\n\n        onStateChanged.call(this, null, {\n          self: this,\n          state: \"close\"\n        });\n\n        jQuery(window).off(\"resize.ax5mask-\" + this.instanceId);\n      };\n\n\n      this.$mask.addClass(\"fade-out\");\n      setTimeout((function () {\n        _close.call(this);\n      }).bind(this), this.activeConfig.animateTime);\n    }\n    return this;\n  }\n\n  /**\n   * @method\n   * @return {AX6UIMask}\n   */\n  align() {\n    if (this.$mask && this.activeConfig && this.activeConfig.target && this.activeConfig.target !== jQuery(document.body).get(0)) {\n      try {\n        let css = {\n          position: this.activeConfig.position || \"absolute\",\n          left: this.$target.offset().left,\n          top: this.$target.offset().top,\n          width: this.$target.outerWidth(),\n          height: this.$target.outerHeight()\n        };\n        this.$mask.css(css);\n      }\n      catch (e) {\n\n      }\n    }\n    return this;\n  }\n}\n\nexport default AX6UIMask;"]}