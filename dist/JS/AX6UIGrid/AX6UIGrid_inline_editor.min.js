"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var _jqmin=require("jqmin"),_jqmin2=_interopRequireDefault(_jqmin),_AX6UIGrid_body=require("./AX6UIGrid_body"),_AX6UIGrid_body2=_interopRequireDefault(_AX6UIGrid_body),edit_text={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){if(void 0!==i.attributes){var a="";for(var d in i.attributes)a+=" "+d+"='"+i.attributes[d]+"'"}return'<input type="text" data-ax6grid-editor="text" value="'+n+'" '+a+">"},init:function(t,e,i,n,a){var d;return n.append(d=(0,_jqmin2.default)(this.getHtml(t,e,i,a))),this.bindUI(t,e,d,i,n,a),d.on("blur",function(){_AX6UIGrid_body2.default.inlineEdit.deActive.call(t,"RETURN",e)}),d},bindUI:function(t,e,i,n,a,d){i.trigger("focus").trigger("select")}},edit_money={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){var a="";if(void 0!==i.attributes)for(var d in i.attributes)a+=" "+d+"='"+i.attributes[d]+"'";return'<input type="text" data-ax6grid-editor="money" value="'+n+'" '+a+'" />'},init:function(t,e,i,n,a){var d=void 0;return n.append(d=(0,_jqmin2.default)(this.getHtml(t,e,i,a))),this.bindUI(t,e,d,i,n,a),d.on("blur",function(){_AX6UIGrid_body2.default.inlineEdit.deActive.call(t,"RETURN",e)}),d},bindUI:function(t,e,i,n,a,d){i.data("binded-ax5ui","ax5formater"),i.ax5formatter($.extend(!0,{pattern:"money"},n.config)),i.trigger("focus").trigger("select")}},edit_number={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){var a="";if(void 0!==i.attributes)for(var d in i.attributes)a+=" "+d+"='"+i.attributes[d]+"'";return'<input type="text" data-ax6grid-editor="number" value="'+n+'" '+a+'" />'},init:function(t,e,i,n,a){var d;return n.append(d=(0,_jqmin2.default)(this.getHtml(t,e,i,a))),this.bindUI(t,e,d,i,n,a),d.on("blur",function(){_AX6UIGrid_body2.default.inlineEdit.deActive.call(t,"RETURN",e)}),d},bindUI:function(t,e,i,n,a,d){i.data("binded-ax5ui","ax5formater"),i.ax5formatter($.extend(!0,{pattern:"number"},n.config)),i.trigger("focus").trigger("select")}},edit_date={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax6grid-editor="calendar" value="'+n+'" >'},init:function(t,e,i,n,a){var d;return n.append(d=(0,_jqmin2.default)(this.getHtml(t,e,i,a))),this.bindUI(t,e,d,i,n,a),d},bindUI:function(t,e,i,n,a,d){var o=t;i.data("binded-ax5ui","ax5picker"),i.ax5picker($.extend(!0,{direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax6grid-inline-edit-picker","date"):"close"==this.state&&_AX6UIGrid_body2.default.inlineEdit.deActive.call(o,"RETURN",e)}},n.config)),i.trigger("focus").trigger("select")}},edit_select={useReturnToSave:!1,editMode:"popup",getHtml:function(t,e,i,n){var a=[];return a.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),a.push("</div>"),a.join("")},init:function(t,e,i,n,a){var d;return n.append(d=(0,_jqmin2.default)(this.getHtml(t,e,i,a))),this.bindUI(t,e,d,i,n,a),d},bindUI:function(t,e,i,n,a,d){var o={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};_jqmin2.default.extend(!0,o,n.config),o.options.forEach(function(t){t[o.columnKeys.optionValue]==d&&(t[o.columnKeys.optionSelected]=!0)});var r=t;i.data("binded-ax5ui","ax5select"),i.ax5select($.extend(!0,{direction:"auto",columnKeys:o.columnKeys,options:o.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax6grid-inline-edit-picker","select"):"changeValue"==this.state?_AX6UIGrid_body2.default.inlineEdit.deActive.call(r,"RETURN",e,this.value[0][o.columnKeys.optionValue]):"close"==this.state&&_AX6UIGrid_body2.default.inlineEdit.deActive.call(r,"ESC",e)}},n.config)),i.ax5select("open"),i.ax5select("setValue",d),i.find("a").trigger("focus")}},edit_checkbox={editMode:"inline",getHtml:function(t,e,i){var n,a=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=e.config&&e.config.trueValue?i==e.config.trueValue?"true":"false":0==i||"false"==i||i<"1"?"false":"true";var d={marginTop:2,height:a-4};return _jqmin2.default.extend(!0,d,e.config),d.marginTop=(a-d.height)/2,'<div data-ax6grid-editor="checkbox" data-ax6grid-checked="'+n+'" style="height:'+d.height+"px;width:"+d.height+"px;margin-top:"+d.marginTop+'px;"></div>'}},edit_textarea={useReturnToSave:!1,editMode:"popup",_getHtml:function(t,e,i,n){return'<div data-ax6grid-editor="textarea"></div>'},_bindUI:function(t,e,i,n,a,d){var o=i.offset(),r={width:i.width()},u=(0,_jqmin2.default)('<div data-ax6grid-popup="textarea" style="z-index: 9999;">\n    <textarea style="width:100%;height:120px;" class="form-control">'+d+'</textarea>\n    <div style="height:30px;padding:5px;text-align: right;">\n        <button class="btn btn-default">OK</button>\n    </div>\n</div>'),l=u.find("textarea");u.css({position:"absolute",left:o.left,top:o.top,width:r.width,height:150}),u.find("textarea"),(0,_jqmin2.default)(document.body).append(u),l.trigger("focus").trigger("select"),l.on("blur",function(i){_AX6UIGrid_body2.default.inlineEdit.deActive.call(t,"RETURN",e,this.value),u.remove(),ax5.util.stopEvent(i.originalEvent)}),l.on("keydown",function(i){i.which==ax5.info.eventKeys.ESC&&(_AX6UIGrid_body2.default.inlineEdit.deActive.call(t,"ESC",e),u.remove(),ax5.util.stopEvent(i.originalEvent))})},init:function(t,e,i,n,a){var d=void 0;return n.append(d=(0,_jqmin2.default)(this._getHtml(t,e,i,a))),this._bindUI(t,e,d,i,n,a),d}};exports.default={text:edit_text,money:edit_money,number:edit_number,date:edit_date,select:edit_select,checkbox:edit_checkbox,textarea:edit_textarea};
//# sourceMappingURL=AX6UIGrid_inline_editor.js.map
